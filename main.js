(()=>{"use strict";const e=e=>{let t={};return t.length=e,t.hitCount=0,t.sunk=!1,t.orientation="horizontal",t.comp=[],t.xCoor=null,t.yCoor=null,t.hitCoor=[],{getShip:()=>t,hit:()=>{t.hitCount+=1,t.hitCount===t.length&&(t.sunk=!0)},isSunk:()=>!0===t.sunk}},t=t=>({number:t,win:!1,board:(()=>{let t=[],r=[],o={l_ship:e(4),m_ship_I:e(3),m_ship_II:e(3),s_ship_I:e(2),s_ship_II:e(2),s_ship_III:e(2),xs_ship_I:e(1),xs_ship_II:e(1),xs_ship_III:e(1),xs_ship_IV:e(1)};const n=(e,r)=>null===t[e][r];return{createBoard:()=>{for(let e=0;e<10;e++){t[e]=[];for(let r=0;r<10;r++)t[e][r]=null}return t},placeShip:(e,r,o)=>{const l=o.getShip().length,a=o.getShip().orientation;let i=e,u=r,s=[],c=!0;if(o.getShip().xCoor=e,o.getShip().yCoor=r,"horizontal"===a){if(r+l-1>9||e>9)return console.log("error");for(;u!==r+l;)s.push([e,u]),u+=1;s.forEach((e=>{if(!n(e[0],e[1]))return c=!1}))}else{if(e+l-1>9||r>9)return console.log("error");for(;i!==e+l;)s.push([i,r]),i+=1;s.forEach((e=>{if(!n(e[0],e[1]))return c=!1}))}return!1===c?(c=!0,s=[],console.log("not empty")):(o.getShip().comp=s,o.getShip().comp.forEach((e=>{t[e[0]][e[1]]=o})),t)},getBoard:()=>t,getShips:()=>o,receiveAttack:(e,o)=>(null===t[e][o]?r.push([e,o]):(t[e][o].hit(),t[e][o].getShip().hitCoor.push([e,o])),t),getMisses:()=>r,isAllSunk:()=>{const e=Object.values(o);let t=!1;return e.forEach((e=>{if(!1===e.getShip().sunk)return t=!1;t=!0})),t}}})(),isComp:!1}),r=e=>{e.board.createBoard(),(e=>{e.board.getBoard();const t=e.board.getShips();Object.keys(t).forEach((r=>{const o=t[r].getShip().xCoor,n=t[r].getShip().yCoor;null!==o&&e.board.placeShip(o,n,t[r])}))})(e);const t=e.board.getBoard(),r=e.number;let o=document.getElementById(`board${r}`);for(;o.lastElementChild;)o.removeChild(o.lastElementChild);for(let e=0;e<t.length;e++)for(let n=0;n<t.length;n++){const l=document.createElement("div");l.classList.add(`${r}-square`),l.setAttribute("data-x",`${e}`),l.setAttribute("data-y",`${n}`),null===t[e][n]&&l.setAttribute("style","background-color: blue;"),o.appendChild(l)}return o},o=e=>{const t=e.board.getShips(),r=Object.keys(t),o=document.querySelector(`#player${e.number}-ships`);return r.forEach((e=>{const t=document.createElement("option");t.textContent=e,o.appendChild(t)})),o},n=e=>{document.querySelector(`#placeShipBtn-${e.number}`).addEventListener("click",(t=>{t.preventDefault();const o=parseInt(document.querySelector(`#player${e.number}-y`).value),n=parseInt(document.querySelector(`#player${e.number}-x`).value),l=document.querySelector(`#player${e.number}-ships`).value,a=document.querySelector(`#player${e.number}-orient`).value,i=e.board.getShips()[l];i.getShip().orientation=a,console.log(a),e.board.placeShip(o,n,i),r(e)}))},l=e=>{const t=e.number,r=document.querySelector(`#player${t}`),o=document.createElement("form"),n=document.createElement("select"),l=document.createElement("select"),a=document.createElement("input"),i=document.createElement("input"),u=document.createElement("button"),s=document.createElement("option"),c=document.createElement("option"),d=document.createElement("button");return o.setAttribute("id",`player${t}-form`),n.setAttribute("name","ships"),n.setAttribute("id",`player${t}-ships`),l.setAttribute("name","orientation"),l.setAttribute("id",`player${t}-orient`),a.setAttribute("type","text"),a.setAttribute("id",`player${t}-x`),a.setAttribute("name","x-coor"),a.setAttribute("placeholder","x"),i.setAttribute("type","text"),i.setAttribute("id",`player${t}-y`),i.setAttribute("name","y-coor"),i.setAttribute("placeholder","y"),u.setAttribute("id",`placeShipBtn-${t}`),u.textContent="Place",d.setAttribute("id",`player${t}-finBtn`),d.textContent="Finish set up",s.textContent="horizontal",c.textContent="vertical",l.append(s,c),o.append(n,a,i,l,u,d),r.appendChild(o),r},a=e=>{const t=document.querySelector(`#player${e.number}-finBtn`),r=document.querySelector(`#player${e.number}-form`),o=e.board.getShips(),n=Object.values(o);let l=!1;n.forEach((e=>{if(null===e.getShip().xCoor)return l=!1;l=!0})),t.addEventListener("click",(t=>{t.preventDefault(),n.forEach((e=>{if(null===e.getShip().xCoor)return l=!1;l=!0})),l?r.setAttribute("style","display: none;"):console.log("Please place all the ships first"),i(e),"Two"===e.number&&document.querySelector(".dialog").showModal()}))},i=e=>{document.querySelectorAll(`.${e.number}-square`).forEach((e=>{e.setAttribute("disabled",""),e.setAttribute("style","background-color: gray;")}))},u=e=>{const t=e.board.getBoard(),r=e.board.getMisses(),o=document.querySelector(`#board${e.number}`);for(;o.lastElementChild;)o.removeChild(o.lastElementChild);for(let n=0;n<t.length;n++)for(let l=0;l<t.length;l++){const a=t[n][l],i=document.createElement("button");i.classList.add(`${e.number}-square`),i.setAttribute("data-x",`${n}`),i.setAttribute("data-y",`${l}`),s(e,i),null!==a&&a.getShip().hitCount>0&&a.getShip().hitCoor.find((e=>e[0]===`${n}`&&e[1]===`${l}`))&&(i.setAttribute("style","background-color: red;"),i.setAttribute("disabled","")),r.find((e=>e[0]===`${n}`&&e[1]===`${l}`))&&(i.setAttribute("style","background-color: green;"),i.setAttribute("disabled","")),o.appendChild(i)}},s=(e,t)=>{const r=e.board,o=r.getBoard(),n=document.querySelector(".dialog"),l=t.getAttribute("data-x"),a=t.getAttribute("data-y");t.addEventListener("click",(u=>{u.preventDefault(),r.receiveAttack(l,a),null===o[l][a]?(i(e),t.setAttribute("style","background-color: red;"),n.showModal()):t.setAttribute("style","background-color: green;")}))};let c=t("One"),d=t("Two");r(c),r(d),l(c),l(d),o(c),o(d),n(c),n(d),a(c),a(d),((e,t)=>{const o=document.querySelector(".dialog"),n=document.querySelector("#play-window");document.querySelector("#play").addEventListener("click",(l=>{l.preventDefault();let a=n.getAttribute("data-id");return"player-Two"===a?(r(e),u(t),n.setAttribute("data-id",`player-${e.number}`),o.close()):"player-One"===a?(r(t),u(e),n.setAttribute("data-id",`player-${t.number}`),o.close()):void 0}))})(c,d),(e=>{const t=e.board.getShips(),o=Object.keys(t),n=["horizontal","vertical"];o.forEach((r=>{const o=t[r],l=o.getShip().length;let a=Math.floor(10*Math.random()),i=Math.floor(10*Math.random()),u=Math.floor(2*Math.random());console.log(r,a,i,l);const s=n[u];if("horizontal"===s)for(;i+l-1>9||null!==e.board.getBoard()[a][i];)console.log("werk"),a=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());else for(;a+l-1>9||null!==e.board.getBoard()[a][i];)console.log("werk"),a=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());o.getShip().orientation=s,e.board.placeShip(a,i,o),console.log(a,i,s),console.log(o.getShip(),r)})),r(e)})(d)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0IsR0FBaEJELEtBQUtFLFVBQ3BCL0YsRUFBSTZGLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxlQUd0QixLQUFPaEcsRUFBSXBCLEVBQVMsRUFBSSxHQUF1QyxPQUFsQ29ELEVBQU85QyxNQUFNa0MsV0FBV3BCLEdBQUdDLElBQ3REYSxRQUFRQyxJQUFJLFFBQ1pmLEVBQUk4RixLQUFLQyxNQUFzQixHQUFoQkQsS0FBS0UsVUFDcEIvRixFQUFJNkYsS0FBS0MsTUFBc0IsR0FBaEJELEtBQUtFLFVBSXhCSCxFQUFLcEgsVUFBVThCLFlBQWMyRixFQUU3QmxFLEVBQU85QyxNQUFNbUIsVUFBVUwsRUFBR0MsRUFBRzRGLEdBRTdCL0UsUUFBUUMsSUFBSWYsRUFBR0MsRUFBR2lHLEdBQ2xCcEYsUUFBUUMsSUFBSThFLEVBQUtwSCxVQUFXNkIsRUFBSyxJQUduQ3lCLEVBQVlDLEVBQU8sRUM3UnJCbUUsQ0FBU2QsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL3NoaXAuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy9ET00uanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU2hpcCA9IChuKSA9PiB7XG4gIGxldCBzaGlwT2JqID0ge307XG5cbiAgc2hpcE9ialtcImxlbmd0aFwiXSA9IG47XG4gIHNoaXBPYmpbXCJoaXRDb3VudFwiXSA9IDA7XG4gIHNoaXBPYmpbXCJzdW5rXCJdID0gZmFsc2U7XG4gIHNoaXBPYmpbXCJvcmllbnRhdGlvblwiXSA9IFwiaG9yaXpvbnRhbFwiO1xuICBzaGlwT2JqW1wiY29tcFwiXSA9IFtdO1xuICBzaGlwT2JqW1wieENvb3JcIl0gPSBudWxsO1xuICBzaGlwT2JqW1wieUNvb3JcIl0gPSBudWxsO1xuICBzaGlwT2JqW1wiaGl0Q29vclwiXSA9IFtdO1xuXG4gIGNvbnN0IGdldFNoaXAgPSAoKSA9PiBzaGlwT2JqO1xuXG4gIGNvbnN0IGhpdCA9ICgpID0+IHtcbiAgICBzaGlwT2JqLmhpdENvdW50ICs9IDE7XG4gICAgaWYgKHNoaXBPYmouaGl0Q291bnQgPT09IHNoaXBPYmoubGVuZ3RoKSBzaGlwT2JqLnN1bmsgPSB0cnVlO1xuICB9O1xuXG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IHtcbiAgICByZXR1cm4gc2hpcE9iai5zdW5rID09PSB0cnVlID8gdHJ1ZSA6IGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0U2hpcCxcbiAgICBoaXQsXG4gICAgaXNTdW5rLFxuICB9O1xufTtcblxuZXhwb3J0IHsgU2hpcCB9O1xuIiwiaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5cbmNvbnN0IFBsYXllciA9IChudW1iZXIpID0+IHtcbiAgbGV0IHdpbiA9IGZhbHNlO1xuICBsZXQgYm9hcmQgPSBHYW1lYm9hcmQoKTtcbiAgbGV0IGlzQ29tcCA9IGZhbHNlO1xuXG4gIHJldHVybiB7XG4gICAgbnVtYmVyLFxuICAgIHdpbixcbiAgICBib2FyZCxcbiAgICBpc0NvbXAsXG4gIH07XG59O1xuXG5leHBvcnQgeyBQbGF5ZXIgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5cbmNvbnN0IEdhbWVib2FyZCA9ICgpID0+IHtcbiAgbGV0IGJvYXJkID0gW107XG4gIGxldCBtaXNzZXMgPSBbXTtcblxuICBsZXQgYWxsU2hpcHMgPSB7XG4gICAgbF9zaGlwOiBTaGlwKDQpLFxuICAgIG1fc2hpcF9JOiBTaGlwKDMpLFxuICAgIG1fc2hpcF9JSTogU2hpcCgzKSxcbiAgICBzX3NoaXBfSTogU2hpcCgyKSxcbiAgICBzX3NoaXBfSUk6IFNoaXAoMiksXG4gICAgc19zaGlwX0lJSTogU2hpcCgyKSxcbiAgICB4c19zaGlwX0k6IFNoaXAoMSksXG4gICAgeHNfc2hpcF9JSTogU2hpcCgxKSxcbiAgICB4c19zaGlwX0lJSTogU2hpcCgxKSxcbiAgICB4c19zaGlwX0lWOiBTaGlwKDEpLFxuICB9O1xuXG4gIGNvbnN0IGdldEJvYXJkID0gKCkgPT4gYm9hcmQ7XG4gIGNvbnN0IGdldE1pc3NlcyA9ICgpID0+IG1pc3NlcztcbiAgY29uc3QgZ2V0U2hpcHMgPSAoKSA9PiBhbGxTaGlwcztcblxuICBjb25zdCBjcmVhdGVCb2FyZCA9ICgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGJvYXJkW2ldID0gW107XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgYm9hcmRbaV1bal0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBib2FyZDtcbiAgfTtcblxuICBjb25zdCBpc0VtcHR5ID0gKHgsIHkpID0+IHtcbiAgICByZXR1cm4gYm9hcmRbeF1beV0gPT09IG51bGwgPyB0cnVlIDogZmFsc2U7XG4gIH07XG5cbiAgY29uc3QgcGxhY2VTaGlwID0gKHgsIHksIHNoaXApID0+IHtcbiAgICBjb25zdCBsZW5ndGggPSBzaGlwLmdldFNoaXAoKS5sZW5ndGg7XG4gICAgY29uc3Qgb3JpZW50YXRpb24gPSBzaGlwLmdldFNoaXAoKS5vcmllbnRhdGlvbjtcbiAgICBsZXQgYSA9IHg7XG4gICAgbGV0IGIgPSB5O1xuICAgIGxldCB0ZW1wID0gW107XG4gICAgbGV0IHN0YXR1cyA9IHRydWU7XG5cbiAgICBzaGlwLmdldFNoaXAoKS54Q29vciA9IHg7XG4gICAgc2hpcC5nZXRTaGlwKCkueUNvb3IgPSB5O1xuXG4gICAgaWYgKG9yaWVudGF0aW9uID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgaWYgKHkgKyBsZW5ndGggLSAxID4gOSB8fCB4ID4gOSkgcmV0dXJuIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XG5cbiAgICAgIHdoaWxlIChiICE9PSB5ICsgbGVuZ3RoKSB7XG4gICAgICAgIHRlbXAucHVzaChbeCwgYl0pO1xuICAgICAgICBiICs9IDE7XG4gICAgICB9XG5cbiAgICAgIHRlbXAuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoIWlzRW1wdHkoaXRlbVswXSwgaXRlbVsxXSkpIHJldHVybiAoc3RhdHVzID0gZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh4ICsgbGVuZ3RoIC0gMSA+IDkgfHwgeSA+IDkpIHJldHVybiBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xuXG4gICAgICB3aGlsZSAoYSAhPT0geCArIGxlbmd0aCkge1xuICAgICAgICB0ZW1wLnB1c2goW2EsIHldKTtcbiAgICAgICAgYSArPSAxO1xuICAgICAgfVxuXG4gICAgICB0ZW1wLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKCFpc0VtcHR5KGl0ZW1bMF0sIGl0ZW1bMV0pKSByZXR1cm4gKHN0YXR1cyA9IGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7XG4gICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgdGVtcCA9IFtdO1xuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKFwibm90IGVtcHR5XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaGlwLmdldFNoaXAoKS5jb21wID0gdGVtcDtcblxuICAgICAgc2hpcC5nZXRTaGlwKCkuY29tcC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGJvYXJkW2l0ZW1bMF1dW2l0ZW1bMV1dID0gc2hpcDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qIFxuICAgIGlmIChzaGlwLmdldFNoaXAoKS5vcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgIGlmICh5ICsgbGVuZ3RoIC0gMSA+IDkgfHwgeCA+IDkpIHJldHVybiBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xuICAgICAgd2hpbGUgKGIgIT09IHkgKyBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCFpc0VtcHR5KHgsIGIpKSByZXR1cm4gY29uc29sZS5sb2coXCJub3QgZW1wdHlcIik7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGJvYXJkW3hdW2JdID0gc2hpcDtcbiAgICAgICAgICBiICs9IDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHggKyBsZW5ndGggLSAxID4gOSB8fCB5ID4gOSkgcmV0dXJuIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XG4gICAgICB3aGlsZSAoYSAhPT0geCArIGxlbmd0aCkge1xuICAgICAgICBpZiAoIWlzRW1wdHkoYSwgeSkpIHJldHVybiBjb25zb2xlLmxvZyhcIm5vdCBlbXB0eVwiKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgYm9hcmRbYV1beV0gPSBzaGlwO1xuICAgICAgICAgIGEgKz0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGJvYXJkW3hdW3ldLmdldFNoaXAoKSk7ICovXG5cbiAgICByZXR1cm4gYm9hcmQ7XG4gIH07XG5cbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh4LCB5KSA9PiB7XG4gICAgaWYgKGJvYXJkW3hdW3ldID09PSBudWxsKSBtaXNzZXMucHVzaChbeCwgeV0pO1xuICAgIGVsc2Uge1xuICAgICAgYm9hcmRbeF1beV0uaGl0KCk7XG4gICAgICBib2FyZFt4XVt5XS5nZXRTaGlwKCkuaGl0Q29vci5wdXNoKFt4LCB5XSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvYXJkO1xuICB9O1xuXG4gIGNvbnN0IGlzQWxsU3VuayA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwcyA9IE9iamVjdC52YWx1ZXMoYWxsU2hpcHMpO1xuICAgIGxldCBzdGF0dXMgPSBmYWxzZTtcblxuICAgIHNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIGlmIChzaGlwLmdldFNoaXAoKS5zdW5rID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gKHN0YXR1cyA9IGZhbHNlKTtcbiAgICAgIH0gZWxzZSBzdGF0dXMgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0YXR1cztcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGNyZWF0ZUJvYXJkLFxuICAgIHBsYWNlU2hpcCxcbiAgICBnZXRCb2FyZCxcbiAgICBnZXRTaGlwcyxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGdldE1pc3NlcyxcbiAgICBpc0FsbFN1bmssXG4gIH07XG59O1xuXG5leHBvcnQgeyBHYW1lYm9hcmQgfTtcbiIsImNvbnN0IGZpbGxTcXIgPSAoc3FyLCB0YWcpID0+IHtcbiAgaWYgKHNxciA9PT0gbnVsbCkge1xuICAgIHRhZy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6IGJsdWU7XCIpO1xuICB9XG59O1xuXG5jb25zdCByZW5kZXJTaGlwID0gKHBsYXllcikgPT4ge1xuICBsZXQgYm9hcmQgPSBwbGF5ZXIuYm9hcmQuZ2V0Qm9hcmQoKTtcbiAgY29uc3Qgc2hpcHNPYmogPSBwbGF5ZXIuYm9hcmQuZ2V0U2hpcHMoKTtcbiAgY29uc3Qgc2hpcHNMaXN0ID0gT2JqZWN0LmtleXMoc2hpcHNPYmopO1xuXG4gIHNoaXBzTGlzdC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgY29uc3QgeENvb3IgPSBzaGlwc09ialtzaGlwXS5nZXRTaGlwKCkueENvb3I7XG4gICAgY29uc3QgeUNvb3IgPSBzaGlwc09ialtzaGlwXS5nZXRTaGlwKCkueUNvb3I7XG5cbiAgICBpZiAoeENvb3IgIT09IG51bGwpIHtcbiAgICAgIHBsYXllci5ib2FyZC5wbGFjZVNoaXAoeENvb3IsIHlDb29yLCBzaGlwc09ialtzaGlwXSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gYm9hcmQ7XG59O1xuXG5jb25zdCByZW5kZXJCb2FyZCA9IChwbGF5ZXIpID0+IHtcbiAgcGxheWVyLmJvYXJkLmNyZWF0ZUJvYXJkKCk7XG5cbiAgcmVuZGVyU2hpcChwbGF5ZXIpO1xuXG4gIGNvbnN0IGJvYXJkID0gcGxheWVyLmJvYXJkLmdldEJvYXJkKCk7XG4gIGNvbnN0IHBsYXllck51bSA9IHBsYXllci5udW1iZXI7XG4gIGxldCBjdXJyZW50Qm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgYm9hcmQke3BsYXllck51bX1gKTtcblxuICB3aGlsZSAoY3VycmVudEJvYXJkLmxhc3RFbGVtZW50Q2hpbGQpXG4gICAgY3VycmVudEJvYXJkLnJlbW92ZUNoaWxkKGN1cnJlbnRCb2FyZC5sYXN0RWxlbWVudENoaWxkKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZC5sZW5ndGg7IGorKykge1xuICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKGAke3BsYXllck51bX0tc3F1YXJlYCk7XG5cbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiwgYCR7aX1gKTtcbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiwgYCR7an1gKTtcblxuICAgICAgZmlsbFNxcihib2FyZFtpXVtqXSwgc3F1YXJlKTtcblxuICAgICAgY3VycmVudEJvYXJkLmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGN1cnJlbnRCb2FyZDtcbn07XG5cbmNvbnN0IGdyYWJQbGF5ZXJTaGlwcyA9IChwbGF5ZXIpID0+IHtcbiAgY29uc3Qgc2hpcHNPYmogPSBwbGF5ZXIuYm9hcmQuZ2V0U2hpcHMoKTtcbiAgY29uc3Qgc2hpcHMgPSBPYmplY3Qua2V5cyhzaGlwc09iaik7XG4gIGNvbnN0IHNlbGVjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwbGF5ZXIke3BsYXllci5udW1iZXJ9LXNoaXBzYCk7XG5cbiAgc2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gc2hpcDtcbiAgICBzZWxlY3Rpb24uYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn07XG5cbmNvbnN0IGluaXRQbGFjZVNoaXAgPSAocGxheWVyKSA9PiB7XG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwbGFjZVNoaXBCdG4tJHtwbGF5ZXIubnVtYmVyfWApO1xuXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCB4Q29vciA9IHBhcnNlSW50KFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3BsYXllciR7cGxheWVyLm51bWJlcn0teWApLnZhbHVlXG4gICAgKTtcbiAgICBjb25zdCB5Q29vciA9IHBhcnNlSW50KFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3BsYXllciR7cGxheWVyLm51bWJlcn0teGApLnZhbHVlXG4gICAgKTtcbiAgICBjb25zdCBzaGlwTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgI3BsYXllciR7cGxheWVyLm51bWJlcn0tc2hpcHNgXG4gICAgKS52YWx1ZTtcblxuICAgIGNvbnN0IG9yaWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgI3BsYXllciR7cGxheWVyLm51bWJlcn0tb3JpZW50YFxuICAgICkudmFsdWU7XG5cbiAgICBjb25zdCBzaGlwID0gcGxheWVyLmJvYXJkLmdldFNoaXBzKClbc2hpcE5hbWVdO1xuXG4gICAgc2hpcC5nZXRTaGlwKCkub3JpZW50YXRpb24gPSBvcmllbnQ7XG4gICAgY29uc29sZS5sb2cob3JpZW50KTtcblxuICAgIHBsYXllci5ib2FyZC5wbGFjZVNoaXAoeENvb3IsIHlDb29yLCBzaGlwKTtcbiAgICByZW5kZXJCb2FyZChwbGF5ZXIpO1xuICB9KTtcbn07XG5cbmNvbnN0IHJlbmRlckZvcm0gPSAocGxheWVyKSA9PiB7XG4gIGNvbnN0IHBsYXllck5vID0gcGxheWVyLm51bWJlcjtcblxuICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3BsYXllciR7cGxheWVyTm99YCk7XG5cbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICBjb25zdCBzZWxlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICBjb25zdCBvcmllbnRhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG4gIGNvbnN0IGlucHV0WCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgY29uc3QgaW5wdXRZID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBjb25zdCBjcm9zcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gIGNvbnN0IGxvbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICBjb25zdCBmaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG4gIGZvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgYHBsYXllciR7cGxheWVyTm99LWZvcm1gKTtcblxuICBzZWxlY3Rpb24uc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInNoaXBzXCIpO1xuICBzZWxlY3Rpb24uc2V0QXR0cmlidXRlKFwiaWRcIiwgYHBsYXllciR7cGxheWVyTm99LXNoaXBzYCk7XG5cbiAgb3JpZW50YXRpb24uc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcIm9yaWVudGF0aW9uXCIpO1xuICBvcmllbnRhdGlvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgcGxheWVyJHtwbGF5ZXJOb30tb3JpZW50YCk7XG5cbiAgaW5wdXRYLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICBpbnB1dFguc2V0QXR0cmlidXRlKFwiaWRcIiwgYHBsYXllciR7cGxheWVyTm99LXhgKTtcbiAgaW5wdXRYLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ4LWNvb3JcIik7XG4gIGlucHV0WC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcInhcIik7XG5cbiAgaW5wdXRZLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICBpbnB1dFkuc2V0QXR0cmlidXRlKFwiaWRcIiwgYHBsYXllciR7cGxheWVyTm99LXlgKTtcbiAgaW5wdXRZLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ5LWNvb3JcIik7XG4gIGlucHV0WS5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcInlcIik7XG5cbiAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIGBwbGFjZVNoaXBCdG4tJHtwbGF5ZXJOb31gKTtcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gXCJQbGFjZVwiO1xuXG4gIGZpbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgcGxheWVyJHtwbGF5ZXJOb30tZmluQnRuYCk7XG4gIGZpbi50ZXh0Q29udGVudCA9IFwiRmluaXNoIHNldCB1cFwiO1xuXG4gIGNyb3NzLnRleHRDb250ZW50ID0gXCJob3Jpem9udGFsXCI7XG4gIGxvbmcudGV4dENvbnRlbnQgPSBcInZlcnRpY2FsXCI7XG5cbiAgb3JpZW50YXRpb24uYXBwZW5kKGNyb3NzLCBsb25nKTtcbiAgZm9ybS5hcHBlbmQoc2VsZWN0aW9uLCBpbnB1dFgsIGlucHV0WSwgb3JpZW50YXRpb24sIGJ1dHRvbiwgZmluKTtcbiAgbWFpbi5hcHBlbmRDaGlsZChmb3JtKTtcblxuICByZXR1cm4gbWFpbjtcbn07XG5cbmNvbnN0IGluaXRGaW5TZXR1cCA9IChwbGF5ZXIpID0+IHtcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3BsYXllciR7cGxheWVyLm51bWJlcn0tZmluQnRuYCk7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjcGxheWVyJHtwbGF5ZXIubnVtYmVyfS1mb3JtYCk7XG4gIGNvbnN0IHNoaXBzT2JqID0gcGxheWVyLmJvYXJkLmdldFNoaXBzKCk7XG4gIGNvbnN0IHNoaXBzID0gT2JqZWN0LnZhbHVlcyhzaGlwc09iaik7XG4gIGxldCBpc0FsbFBsYWNlZCA9IGZhbHNlO1xuXG4gIHNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICBpZiAoc2hpcC5nZXRTaGlwKCkueENvb3IgPT09IG51bGwpIHJldHVybiAoaXNBbGxQbGFjZWQgPSBmYWxzZSk7XG4gICAgZWxzZSBpc0FsbFBsYWNlZCA9IHRydWU7XG4gIH0pO1xuXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBzaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICBpZiAoc2hpcC5nZXRTaGlwKCkueENvb3IgPT09IG51bGwpIHJldHVybiAoaXNBbGxQbGFjZWQgPSBmYWxzZSk7XG4gICAgICBlbHNlIGlzQWxsUGxhY2VkID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGlzQWxsUGxhY2VkXG4gICAgICA/IGZvcm0uc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBub25lO1wiKVxuICAgICAgOiBjb25zb2xlLmxvZyhcIlBsZWFzZSBwbGFjZSBhbGwgdGhlIHNoaXBzIGZpcnN0XCIpO1xuXG4gICAgaGlkZUJvYXJkKHBsYXllcik7XG5cbiAgICBpZiAocGxheWVyLm51bWJlciA9PT0gXCJUd29cIikge1xuICAgICAgY29uc3QgZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kaWFsb2dcIik7XG4gICAgICBkaWFsb2cuc2hvd01vZGFsKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IGhpZGVCb2FyZCA9IChwbGF5ZXIpID0+IHtcbiAgbGV0IHNxdWFyZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtwbGF5ZXIubnVtYmVyfS1zcXVhcmVgKTtcblxuICBzcXVhcmVzLmZvckVhY2goKHNxdWFyZSkgPT4ge1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiBncmF5O1wiKTtcbiAgfSk7XG59O1xuXG5jb25zdCBpbml0cGxheUJ0biA9IChQT25lLCBQVHdvKSA9PiB7XG4gIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlhbG9nXCIpO1xuICBjb25zdCBwbGF5V2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5LXdpbmRvd1wiKTtcbiAgY29uc3QgcGxheUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheVwiKTtcblxuICBwbGF5QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgcGxheWVyID0gcGxheVdpbmRvdy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpO1xuXG4gICAgaWYgKHBsYXllciA9PT0gXCJwbGF5ZXItVHdvXCIpIHtcbiAgICAgIHJlbmRlckJvYXJkKFBPbmUpO1xuICAgICAgcmVuZGVyUGxheUJkKFBUd28pO1xuICAgICAgcGxheVdpbmRvdy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIGBwbGF5ZXItJHtQT25lLm51bWJlcn1gKTtcbiAgICAgIHJldHVybiBkaWFsb2cuY2xvc2UoKTtcbiAgICB9IGVsc2UgaWYgKHBsYXllciA9PT0gXCJwbGF5ZXItT25lXCIpIHtcbiAgICAgIHJlbmRlckJvYXJkKFBUd28pO1xuICAgICAgcmVuZGVyUGxheUJkKFBPbmUpO1xuICAgICAgcGxheVdpbmRvdy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIGBwbGF5ZXItJHtQVHdvLm51bWJlcn1gKTtcbiAgICAgIHJldHVybiBkaWFsb2cuY2xvc2UoKTtcbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgcmVuZGVyUGxheUJkID0gKHBsYXllcikgPT4ge1xuICBjb25zdCBib2FyZCA9IHBsYXllci5ib2FyZC5nZXRCb2FyZCgpO1xuICBjb25zdCBtaXNzZXMgPSBwbGF5ZXIuYm9hcmQuZ2V0TWlzc2VzKCk7XG4gIGNvbnN0IGN1cnJCb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNib2FyZCR7cGxheWVyLm51bWJlcn1gKTtcblxuICB3aGlsZSAoY3VyckJvYXJkLmxhc3RFbGVtZW50Q2hpbGQpXG4gICAgY3VyckJvYXJkLnJlbW92ZUNoaWxkKGN1cnJCb2FyZC5sYXN0RWxlbWVudENoaWxkKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZC5sZW5ndGg7IGorKykge1xuICAgICAgY29uc3QgaXRlbSA9IGJvYXJkW2ldW2pdO1xuXG4gICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoYCR7cGxheWVyLm51bWJlcn0tc3F1YXJlYCk7XG5cbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiwgYCR7aX1gKTtcbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiwgYCR7an1gKTtcblxuICAgICAgaW5pdFNxckJ0bihwbGF5ZXIsIHNxdWFyZSk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgaXRlbSAhPT0gbnVsbCAmJlxuICAgICAgICBpdGVtLmdldFNoaXAoKS5oaXRDb3VudCA+IDAgJiZcbiAgICAgICAgaXRlbS5nZXRTaGlwKCkuaGl0Q29vci5maW5kKChpdGVtKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW1bMF0gPT09IGAke2l9YCAmJiBpdGVtWzFdID09PSBgJHtqfWA7XG4gICAgICAgIH0pXG4gICAgICApIHtcbiAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogcmVkO1wiKTtcbiAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIG1pc3Nlcy5maW5kKChpdGVtKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW1bMF0gPT09IGAke2l9YCAmJiBpdGVtWzFdID09PSBgJHtqfWA7XG4gICAgICAgIH0pXG4gICAgICApIHtcbiAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47XCIpO1xuICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgICB9XG5cbiAgICAgIGN1cnJCb2FyZC5hcHBlbmRDaGlsZChzcXVhcmUpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgaW5pdFNxckJ0biA9IChwbGF5ZXIsIHNxdWFyZSkgPT4ge1xuICBjb25zdCBib2FyZCA9IHBsYXllci5ib2FyZDtcbiAgY29uc3QgYm9hcmRMaXN0ID0gYm9hcmQuZ2V0Qm9hcmQoKTtcbiAgY29uc3QgZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kaWFsb2dcIik7XG4gIGNvbnN0IHggPSBzcXVhcmUuZ2V0QXR0cmlidXRlKFwiZGF0YS14XCIpO1xuICBjb25zdCB5ID0gc3F1YXJlLmdldEF0dHJpYnV0ZShcImRhdGEteVwiKTtcblxuICBzcXVhcmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgYm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcbiAgICBpZiAoYm9hcmRMaXN0W3hdW3ldID09PSBudWxsKSB7XG4gICAgICBoaWRlQm9hcmQocGxheWVyKTtcbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6IHJlZDtcIik7XG4gICAgICBkaWFsb2cuc2hvd01vZGFsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6IGdyZWVuO1wiKTtcbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgY29tcE1vZGUgPSAocGxheWVyKSA9PiB7XG4gIGNvbnN0IHNoaXBzT2JqID0gcGxheWVyLmJvYXJkLmdldFNoaXBzKCk7XG4gIGNvbnN0IHNoaXBzTGlzdCA9IE9iamVjdC5rZXlzKHNoaXBzT2JqKTtcbiAgY29uc3QgZGlyZWN0aW9ucyA9IFtcImhvcml6b250YWxcIiwgXCJ2ZXJ0aWNhbFwiXTtcblxuICBzaGlwc0xpc3QuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgIGNvbnN0IGJvYXQgPSBzaGlwc09ialtzaGlwXTtcblxuICAgIGNvbnN0IGxlbmd0aCA9IGJvYXQuZ2V0U2hpcCgpLmxlbmd0aDtcblxuICAgIGxldCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApOyAvKiA9IG51bGw7ICovXG4gICAgbGV0IHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7IC8qID0gbnVsbDsgKi9cbiAgICBsZXQgeiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpO1xuXG4gICAgY29uc29sZS5sb2coc2hpcCwgeCwgeSwgbGVuZ3RoKTtcblxuICAgIGNvbnN0IGRpciA9IGRpcmVjdGlvbnNbel07XG5cbiAgICBpZiAoZGlyID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgd2hpbGUgKHkgKyBsZW5ndGggLSAxID4gOSB8fCBwbGF5ZXIuYm9hcmQuZ2V0Qm9hcmQoKVt4XVt5XSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIndlcmtcIik7XG4gICAgICAgIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICAgIHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlICh4ICsgbGVuZ3RoIC0gMSA+IDkgfHwgcGxheWVyLmJvYXJkLmdldEJvYXJkKClbeF1beV0gIT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ3ZXJrXCIpO1xuICAgICAgICB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgICB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGJvYXQuZ2V0U2hpcCgpLm9yaWVudGF0aW9uID0gZGlyO1xuXG4gICAgcGxheWVyLmJvYXJkLnBsYWNlU2hpcCh4LCB5LCBib2F0KTtcblxuICAgIGNvbnNvbGUubG9nKHgsIHksIGRpcik7XG4gICAgY29uc29sZS5sb2coYm9hdC5nZXRTaGlwKCksIHNoaXApO1xuICB9KTtcblxuICByZW5kZXJCb2FyZChwbGF5ZXIpO1xufTtcblxuZXhwb3J0IHtcbiAgcmVuZGVyQm9hcmQsXG4gIGdyYWJQbGF5ZXJTaGlwcyxcbiAgaW5pdFBsYWNlU2hpcCxcbiAgcmVuZGVyRm9ybSxcbiAgaW5pdEZpblNldHVwLFxuICBpbml0cGxheUJ0bixcbiAgY29tcE1vZGUsXG59O1xuIiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQge1xuICByZW5kZXJCb2FyZCxcbiAgZ3JhYlBsYXllclNoaXBzLFxuICBpbml0UGxhY2VTaGlwLFxuICByZW5kZXJGb3JtLFxuICBpbml0RmluU2V0dXAsXG4gIGluaXRwbGF5QnRuLFxuICBjb21wTW9kZSxcbn0gZnJvbSBcIi4vRE9NXCI7XG5cbmxldCBwbGF5ZXJPbmUgPSBQbGF5ZXIoXCJPbmVcIik7XG5sZXQgcGxheWVyVHdvID0gUGxheWVyKFwiVHdvXCIpO1xuXG5yZW5kZXJCb2FyZChwbGF5ZXJPbmUpO1xucmVuZGVyQm9hcmQocGxheWVyVHdvKTtcblxucmVuZGVyRm9ybShwbGF5ZXJPbmUpO1xucmVuZGVyRm9ybShwbGF5ZXJUd28pO1xuXG5ncmFiUGxheWVyU2hpcHMocGxheWVyT25lKTtcbmdyYWJQbGF5ZXJTaGlwcyhwbGF5ZXJUd28pO1xuXG5pbml0UGxhY2VTaGlwKHBsYXllck9uZSk7XG5pbml0UGxhY2VTaGlwKHBsYXllclR3byk7XG5cbmluaXRGaW5TZXR1cChwbGF5ZXJPbmUpO1xuaW5pdEZpblNldHVwKHBsYXllclR3byk7XG5cbmluaXRwbGF5QnRuKHBsYXllck9uZSwgcGxheWVyVHdvKTtcblxuY29tcE1vZGUocGxheWVyVHdvKTtcbiJdLCJuYW1lcyI6WyJTaGlwIiwibiIsInNoaXBPYmoiLCJnZXRTaGlwIiwiaGl0IiwiaGl0Q291bnQiLCJsZW5ndGgiLCJzdW5rIiwiaXNTdW5rIiwiUGxheWVyIiwibnVtYmVyIiwid2luIiwiYm9hcmQiLCJtaXNzZXMiLCJhbGxTaGlwcyIsImxfc2hpcCIsIm1fc2hpcF9JIiwibV9zaGlwX0lJIiwic19zaGlwX0kiLCJzX3NoaXBfSUkiLCJzX3NoaXBfSUlJIiwieHNfc2hpcF9JIiwieHNfc2hpcF9JSSIsInhzX3NoaXBfSUlJIiwieHNfc2hpcF9JViIsImlzRW1wdHkiLCJ4IiwieSIsImNyZWF0ZUJvYXJkIiwiaSIsImoiLCJwbGFjZVNoaXAiLCJzaGlwIiwib3JpZW50YXRpb24iLCJhIiwiYiIsInRlbXAiLCJzdGF0dXMiLCJ4Q29vciIsInlDb29yIiwiY29uc29sZSIsImxvZyIsInB1c2giLCJmb3JFYWNoIiwiaXRlbSIsImNvbXAiLCJnZXRCb2FyZCIsImdldFNoaXBzIiwicmVjZWl2ZUF0dGFjayIsImhpdENvb3IiLCJnZXRNaXNzZXMiLCJpc0FsbFN1bmsiLCJzaGlwcyIsIk9iamVjdCIsInZhbHVlcyIsIkdhbWVib2FyZCIsImlzQ29tcCIsInJlbmRlckJvYXJkIiwicGxheWVyIiwic2hpcHNPYmoiLCJrZXlzIiwicmVuZGVyU2hpcCIsInBsYXllck51bSIsImN1cnJlbnRCb2FyZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJsYXN0RWxlbWVudENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJzcXVhcmUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJncmFiUGxheWVyU2hpcHMiLCJzZWxlY3Rpb24iLCJxdWVyeVNlbGVjdG9yIiwib3B0aW9uIiwidGV4dENvbnRlbnQiLCJpbml0UGxhY2VTaGlwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInBhcnNlSW50IiwidmFsdWUiLCJzaGlwTmFtZSIsIm9yaWVudCIsInJlbmRlckZvcm0iLCJwbGF5ZXJObyIsIm1haW4iLCJmb3JtIiwiaW5wdXRYIiwiaW5wdXRZIiwiYnV0dG9uIiwiY3Jvc3MiLCJsb25nIiwiZmluIiwiYXBwZW5kIiwiaW5pdEZpblNldHVwIiwiaXNBbGxQbGFjZWQiLCJoaWRlQm9hcmQiLCJzaG93TW9kYWwiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVuZGVyUGxheUJkIiwiY3VyckJvYXJkIiwiaW5pdFNxckJ0biIsImZpbmQiLCJib2FyZExpc3QiLCJkaWFsb2ciLCJnZXRBdHRyaWJ1dGUiLCJwbGF5ZXJPbmUiLCJwbGF5ZXJUd28iLCJQT25lIiwiUFR3byIsInBsYXlXaW5kb3ciLCJjbG9zZSIsImluaXRwbGF5QnRuIiwic2hpcHNMaXN0IiwiZGlyZWN0aW9ucyIsImJvYXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ6IiwiZGlyIiwiY29tcE1vZGUiXSwic291cmNlUm9vdCI6IiJ9