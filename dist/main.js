(()=>{"use strict";const e=e=>{let t={};return t.length=e,t.hitCount=0,t.sunk=!1,t.orientation="horizontal",t.comp=[],t.hitCoor=[],{getShip:()=>t,hit:()=>{t.hitCount+=1,t.hitCount===t.length&&(t.sunk=!0)},isSunk:()=>!0===t.sunk,resetShip:()=>(t.length=e,t.hitCount=0,t.sunk=!1,t.orientation="horizontal",t.comp=[],t.hitCoor=[],t)}},t=()=>{let t=[],r=[],o=[],n={battleship:e(4),cruiser_I:e(3),cruiser_II:e(3),destroyer_I:e(2),destroyer_II:e(2),destroyer_III:e(2),submarine_I:e(1),submarine_II:e(1),submarine_III:e(1),submarine_IV:e(1)};const a=e=>{let r=!0;return e.forEach((e=>{if(e[0]>9||e[1]>9||(o=e[0],n=e[1],null!==t[o][n]))return r=!1;var o,n})),r},l=(e,t,r)=>{const o=r.getShip().length;let n=[],a=e,l=t;if("horizontal"===r.getShip().orientation)for(;l!==t+o;)n.push([e,l]),l+=1;else for(;a!==e+o;)n.push([a,t]),a+=1;return n},u=(e,r,o)=>{let n=[],u=!0;return r+length-1>9||e>9||e+length-1>9||r>9?alert("Ship is out of bound"):(n=l(e,r,o),u=a(n),!1===u?(u=!0,n=[],alert("square is already occupied")):(o.getShip().comp=n,o.getShip().comp.forEach((e=>{t[e[0]][e[1]]=o})),t))};return{createBoard:()=>{for(let e=0;e<10;e++){t[e]=[];for(let r=0;r<10;r++)t[e][r]=null}return t},placeShip:u,getBoard:()=>t,getShips:()=>n,receiveAttack:(e,n)=>(null===t[e][n]?r.push([e,n]):(o.push([e,n]),t[e][n].hit(),t[e][n].getShip().hitCoor.push([e,n])),t),getMisses:()=>r,getHits:()=>o,isAllSunk:()=>{const e=Object.values(n);let t=!0;return e.forEach((e=>{if(!e.isSunk())return t=!1})),t},populateBd:()=>{const e=Object.keys(n),r=["horizontal","vertical"];return e.forEach((e=>{const t=n[e],o=t.getShip().length;let c=Math.floor(10*Math.random()),d=Math.floor(10*Math.random()),s=Math.floor(2*Math.random());t.getShip().orientation=r[s];let i=l(c,d,t),m=a(i);for(;d+o-1>9||c+o-1>9||!1===m;)c=Math.floor(10*Math.random()),d=Math.floor(10*Math.random()),s=Math.floor(2*Math.random()),t.getShip().orientation=r[s],i=l(c,d,t),m=a(i);u(c,d,t)})),t},resetBoard:()=>{const e=Object.keys(n);t=[],r=[],o=[],e.forEach((e=>{n[e].resetShip()}))}}},r=e=>({number:e,win:!1,board:t(),isComp:!1}),o=(e,t,r,o,n)=>{const a=e.board.getMisses();null===t?a.find((e=>e[0]===o&&e[1]===n))?r.setAttribute("style","background-color: yellow;"):r.setAttribute("style","background-color: blue;"):t.getShip().hitCoor.find((e=>e[0]===o&&e[1]===n))&&r.setAttribute("style","background-color: red;")},n=e=>{e.board.createBoard(),(e=>{e.board.getBoard();const t=e.board.getShips();Object.keys(t).forEach((r=>{const o=t[r].getShip().comp;if(0!==o.length){const n=o[0][0],a=o[0][1];e.board.placeShip(n,a,t[r])}}))})(e);const t=e.board.getBoard(),r=e.number;let n=document.getElementById(`board${r}`);for(;n.lastElementChild;)n.removeChild(n.lastElementChild);for(let a=0;a<t.length;a++)for(let l=0;l<t.length;l++){const u=document.createElement("div");u.classList.add(`${r}-square`),u.setAttribute("data-x",`${a}`),u.setAttribute("data-y",`${l}`),o(e,t[a][l],u,a,l),n.appendChild(u)}return n},a=e=>{document.querySelectorAll(`.${e.number}-square`).forEach((e=>{e.setAttribute("disabled",""),e.setAttribute("style","background-color: gray;")}))},l=(e,t,r)=>{let o,n,a;for("player-Two"===r?(o=t.board.getBoard(),n=t.board.getMisses(),a=document.querySelector(`#board${t.number}`)):(o=e.board.getBoard(),n=e.board.getMisses(),a=document.querySelector(`#board${e.number}`));a.lastElementChild;)a.removeChild(a.lastElementChild);for(let l=0;l<o.length;l++)for(let c=0;c<o.length;c++){const d=o[l][c],s=document.createElement("button");"player-One"===r?s.classList.add(`${e.number}-square`):s.classList.add(`${t.number}-square`),s.setAttribute("data-x",`${l}`),s.setAttribute("data-y",`${c}`),u(e,t,s),null!==d&&d.getShip().hitCount>0&&d.getShip().hitCoor.find((e=>e[0]===l&&e[1]===c))&&(s.setAttribute("style","background-color: red;"),s.setAttribute("disabled","")),n.find((e=>e[0]===l&&e[1]===c))&&(s.setAttribute("style","background-color: green;"),s.setAttribute("disabled","")),a.appendChild(s)}},u=(e,t,r)=>{const o=document.querySelector(".dialog"),n=parseInt(r.getAttribute("data-x")),l=parseInt(r.getAttribute("data-y")),u=document.querySelector(".winner"),c=document.querySelector(".end-game"),d=document.querySelector("#play-window"),s=document.querySelector(".player-name"),i=document.querySelector("main");r.addEventListener("click",(m=>{m.preventDefault();const h=r.getAttribute("class"),p=d.getAttribute("data-id"),b=i.getAttribute("class");let y,g;y="One-square"===h?e.board:t.board,g=y.getBoard(),y.receiveAttack(n,l),null===g[n][l]?(a("One-square"===h?t:e),r.setAttribute("style","background-color: yellow;"),s.textContent="pvc"===b?"Computer`s turn!":"player-One"===p?"Player Two`s turn!":"Player One`s turn!",o.showModal()):(r.setAttribute("style","background-color: red;"),y.isAllSunk()&&(r.setAttribute("style","background-color: red;"),c.showModal(),u.textContent="player-Two"===p?"Congratulations Player Two!":"Congratulations Player One!"))}))},c=document.querySelector("#ships");c.addEventListener("onchange",(()=>{console.log(c.value)}));const d=document.querySelector(".game_mode"),s=document.querySelector("#pvp"),i=document.querySelector("#pvc"),m=document.querySelectorAll(".restart"),h=document.querySelector(".end-game"),p=document.querySelector("form");let b=r("One"),y=r("Two");var g,S;g=b,S=y,document.querySelector("#placeShipBtn").addEventListener("click",(e=>{e.preventDefault();let t=document.querySelector("form").getAttribute("id");const r=parseInt(document.querySelector("#y-coor").value),o=parseInt(document.querySelector("#x-coor").value),a=document.querySelector("#ships").value,l=document.querySelector("#orientation").value;let u;u="playerOne-form"===t?g.board.getShips()[a]:S.board.getShips()[a],u.getShip().orientation=l,Number.isNaN(r)||Number.isNaN(o)||("playerOne-form"===t?(g.board.placeShip(r,o,u),n(g)):(S.board.placeShip(r,o,u),n(S)))})),((e,t)=>{const r=document.querySelector("main"),o=document.querySelector("#finBtn"),n=document.querySelector("form"),l=document.querySelector(".player-name");let u=!1;o.addEventListener("click",(o=>{let c;o.preventDefault();const d=r.getAttribute("class");let s=n.getAttribute("id");if(c="playerOne-form"===s?e.board.getShips():t.board.getShips(),Object.values(c).forEach((e=>{const t=e.getShip().comp;return u=0!==t.length})),u){const r=document.querySelector("#x-coor"),o=document.querySelector("#y-coor"),u=document.querySelector("#battleship");if(r.value="",o.value="",u.removeAttribute("selected"),u.setAttribute("selected",""),"playerOne-form"===s&&(n.setAttribute("id","playerTwo-form"),a(e)),"pvc"===d||"playerTwo-form"===s){n.setAttribute("style","display: none;"),a(t);const e=document.querySelector(".dialog");l.textContent="Player One`s turn!",e.showModal()}}else alert("Please place all the ships first")}))})(b,y),((e,t)=>{const r=document.querySelector("main"),o=document.querySelector(".dialog"),a=document.querySelector("#play-window");document.querySelector("#play").addEventListener("click",(u=>{u.preventDefault();let c=a.getAttribute("data-id");if("player-Two"===c)return n(e),l(e,t,c),a.setAttribute("data-id",`player-${e.number}`),o.close();if("player-One"===c){const u=r.getAttribute("class");return a.setAttribute("data-id",`player-${t.number}`),"pvc"===u?(((e,t)=>{const r=e.board,o=r.getBoard(),a=r.getMisses(),u=r.getHits(),c=document.querySelector("#play-window"),d=document.querySelector(".winner"),s=document.querySelector(".end-game");let i=Math.floor(10*Math.random()),m=Math.floor(10*Math.random()),h=!0;for(;!0===h;)if(a.find((e=>e[0]===i&&e[1]===m))||u.find((e=>e[0]===i&&e[1]===m)))i=Math.floor(10*Math.random()),m=Math.floor(10*Math.random());else if(r.receiveAttack(i,m),null===o[i][m]){const r=`player-${t.number}`;c.setAttribute("data-id",`player-${e.number}`),n(e),l(e,t,r),h=!1}else e.board.isAllSunk()?(h=!1,s.showModal(),d.textContent="Computer won!"):(i=Math.floor(10*Math.random()),m=Math.floor(10*Math.random()))})(e,t),o.close()):(n(t),l(e,t,c),o.close())}}))})(b,y),((e,t)=>{const r=document.querySelector("form");document.querySelector("#random").addEventListener("click",(o=>{o.preventDefault(),"playerOne-form"===r.getAttribute("id")?(e.board.populateBd(),n(e)):(t.board.populateBd(),n(t))}))})(b,y),n(b),n(y),s.addEventListener("click",(e=>(e.preventDefault(),d.close()))),i.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("main");var r;return(r=y).board.populateBd(),n(r),a(r),t.classList.add("pvc"),d.close()})),m.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("main"),r=document.querySelector("#play-window"),o=document.querySelector("#x-coor"),a=document.querySelector("#y-coor"),l=document.querySelector("#battleship");h.close(),p.setAttribute("id","playerOne-form"),p.removeAttribute("style"),t.classList.remove("pvc"),r.setAttribute("data-id","player-Two"),o.value="",a.value="",l.removeAttribute("selected"),l.setAttribute("selected",""),b.board.resetBoard(),y.board.resetBoard(),n(b),n(y),d.showModal()})))),document.addEventListener("onload",d.showModal())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFBTUEsRUFBUUMsSUFDWixJQUFJQyxFQUFVLENBQUMsRUErQmYsT0E3QkFBLEVBQWdCLE9BQUlELEVBQ3BCQyxFQUFrQixTQUFJLEVBQ3RCQSxFQUFjLE1BQUksRUFDbEJBLEVBQXFCLFlBQUksYUFDekJBLEVBQWMsS0FBSSxHQUNsQkEsRUFBaUIsUUFBSSxHQXdCZCxDQUNMQyxRQXZCYyxJQUFNRCxFQXdCcEJFLElBdEJVLEtBQ1ZGLEVBQVFHLFVBQVksRUFDaEJILEVBQVFHLFdBQWFILEVBQVFJLFNBQVFKLEVBQVFLLE1BQU8sRUFBSSxFQXFCNURDLE9BbEJhLEtBQ1csSUFBakJOLEVBQVFLLEtBa0JmRSxVQWZnQixLQUNoQlAsRUFBUUksT0FBU0wsRUFDakJDLEVBQVFHLFNBQVcsRUFDbkJILEVBQVFLLE1BQU8sRUFDZkwsRUFBUVEsWUFBYyxhQUN0QlIsRUFBUVMsS0FBTyxHQUNmVCxFQUFRVSxRQUFVLEdBRVhWLEdBUVIsRUNuQ0dXLEVBQVksS0FDaEIsSUFBSUMsRUFBUSxHQUNSQyxFQUFTLEdBQ1RDLEVBQU8sR0FFUEMsRUFBVyxDQUNiQyxXQUFZbEIsRUFBSyxHQUNqQm1CLFVBQVduQixFQUFLLEdBQ2hCb0IsV0FBWXBCLEVBQUssR0FDakJxQixZQUFhckIsRUFBSyxHQUNsQnNCLGFBQWN0QixFQUFLLEdBQ25CdUIsY0FBZXZCLEVBQUssR0FDcEJ3QixZQUFheEIsRUFBSyxHQUNsQnlCLGFBQWN6QixFQUFLLEdBQ25CMEIsY0FBZTFCLEVBQUssR0FDcEIyQixhQUFjM0IsRUFBSyxJQUdyQixNQW9CTTRCLEVBQVNDLElBQ2IsSUFBSUMsR0FBUyxFQU9iLE9BTEFELEVBQUlFLFNBQVNDLElBQ1gsR0FBSUEsRUFBSyxHQUFLLEdBQUtBLEVBQUssR0FBSyxJQVJoQkMsRUFROEJELEVBQUssR0FSaENFLEVBUW9DRixFQUFLLEdBUHBDLE9BQWhCbEIsRUFBTW1CLEdBQUdDLElBUVosT0FBUUosR0FBUyxFQVRQLElBQUNHLEVBQUdDLENBU1MsSUFHcEJKLENBQU0sRUFHVEssRUFBYSxDQUFDRixFQUFHQyxFQUFHRSxLQUN4QixNQUFNOUIsRUFBUzhCLEVBQUtqQyxVQUFVRyxPQUU5QixJQUFJK0IsRUFBTyxHQUNQQyxFQUFJTCxFQUNKTSxFQUFJTCxFQUVSLEdBQW9CLGVBTEFFLEVBQUtqQyxVQUFVTyxZQU1qQyxLQUFPNkIsSUFBTUwsRUFBSTVCLEdBQ2YrQixFQUFLRyxLQUFLLENBQUNQLEVBQUdNLElBQ2RBLEdBQUssT0FHUCxLQUFPRCxJQUFNTCxFQUFJM0IsR0FDZitCLEVBQUtHLEtBQUssQ0FBQ0YsRUFBR0osSUFDZEksR0FBSyxFQUlULE9BQU9ELENBQUksRUFHUEksRUFBWSxDQUFDUixFQUFHQyxFQUFHRSxLQUN2QixJQUFJQyxFQUFPLEdBQ1BQLEdBQVMsRUFFYixPQUFJSSxFQUFJNUIsT0FBUyxFQUFJLEdBQUsyQixFQUFJLEdBQUtBLEVBQUkzQixPQUFTLEVBQUksR0FBSzRCLEVBQUksRUFDcERRLE1BQU0seUJBRWJMLEVBQU9GLEVBQVdGLEVBQUdDLEVBQUdFLEdBQ3hCTixFQUFTRixFQUFNUyxJQUdGLElBQVhQLEdBQ0ZBLEdBQVMsRUFDVE8sRUFBTyxHQUNBSyxNQUFNLGdDQUViTixFQUFLakMsVUFBVVEsS0FBTzBCLEVBRXRCRCxFQUFLakMsVUFBVVEsS0FBS29CLFNBQVNDLElBQzNCbEIsRUFBTWtCLEVBQUssSUFBSUEsRUFBSyxJQUFNSSxDQUFJLElBSTNCdEIsR0FBSyxFQXNFZCxNQUFPLENBQ0w2QixZQTlJa0IsS0FDbEIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFBSyxDQUMzQjlCLEVBQU04QixHQUFLLEdBQ1gsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDdEIvQixFQUFNOEIsR0FBR0MsR0FBSyxJQUVsQixDQUVBLE9BQU8vQixDQUFLLEVBdUlaMkIsWUFDQUssU0FySmUsSUFBTWhDLEVBc0pyQmlDLFNBcEplLElBQU05QixFQXFKckIrQixjQXhDb0IsQ0FBQ2YsRUFBR0MsS0FDSixPQUFoQnBCLEVBQU1tQixHQUFHQyxHQUFhbkIsRUFBT3lCLEtBQUssQ0FBQ1AsRUFBR0MsS0FFeENsQixFQUFLd0IsS0FBSyxDQUFDUCxFQUFHQyxJQUNkcEIsRUFBTW1CLEdBQUdDLEdBQUc5QixNQUNaVSxFQUFNbUIsR0FBR0MsR0FBRy9CLFVBQVVTLFFBQVE0QixLQUFLLENBQUNQLEVBQUdDLEtBR2xDcEIsR0FpQ1BtQyxVQXZKZ0IsSUFBTWxDLEVBd0p0Qm1DLFFBdEpjLElBQU1sQyxFQXVKcEJtQyxVQWhDZ0IsS0FDaEIsTUFBTUMsRUFBUUMsT0FBT0MsT0FBT3JDLEdBQzVCLElBQUlhLEdBQVMsRUFRYixPQU5Bc0IsRUFBTXJCLFNBQVNLLElBQ2IsSUFBS0EsRUFBSzVCLFNBQ1IsT0FBUXNCLEdBQVMsQ0FDbkIsSUFHS0EsQ0FBTSxFQXVCYnlCLFdBNUVpQixLQUNqQixNQUFNQyxFQUFPSCxPQUFPRyxLQUFLdkMsR0FDbkJ3QyxFQUFhLENBQUMsYUFBYyxZQTJCbEMsT0F6QkFELEVBQUt6QixTQUFTMkIsSUFDWixNQUFNdEIsRUFBT25CLEVBQVN5QyxHQUNoQnBELEVBQVM4QixFQUFLakMsVUFBVUcsT0FFOUIsSUFBSTJCLEVBQUkwQixLQUFLQyxNQUFzQixHQUFoQkQsS0FBS0UsVUFDcEIzQixFQUFJeUIsS0FBS0MsTUFBc0IsR0FBaEJELEtBQUtFLFVBQ3BCQyxFQUFJSCxLQUFLQyxNQUFzQixFQUFoQkQsS0FBS0UsVUFFeEJ6QixFQUFLakMsVUFBVU8sWUFBYytDLEVBQVdLLEdBQ3hDLElBQUl6QixFQUFPRixFQUFXRixFQUFHQyxFQUFHRSxHQUN4QjJCLEVBQU1uQyxFQUFNUyxHQUVoQixLQUFPSCxFQUFJNUIsRUFBUyxFQUFJLEdBQUsyQixFQUFJM0IsRUFBUyxFQUFJLElBQWEsSUFBUnlELEdBQ2pEOUIsRUFBSTBCLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxVQUNwQjNCLEVBQUl5QixLQUFLQyxNQUFzQixHQUFoQkQsS0FBS0UsVUFDcEJDLEVBQUlILEtBQUtDLE1BQXNCLEVBQWhCRCxLQUFLRSxVQUVwQnpCLEVBQUtqQyxVQUFVTyxZQUFjK0MsRUFBV0ssR0FDeEN6QixFQUFPRixFQUFXRixFQUFHQyxFQUFHRSxHQUN4QjJCLEVBQU1uQyxFQUFNUyxHQUdkSSxFQUFVUixFQUFHQyxFQUFHRSxFQUFLLElBR2hCdEIsQ0FBSyxFQWdEWmtELFdBckJpQixLQUNqQixNQUFNUixFQUFPSCxPQUFPRyxLQUFLdkMsR0FDekJILEVBQVEsR0FDUkMsRUFBUyxHQUNUQyxFQUFPLEdBRVB3QyxFQUFLekIsU0FBU0ssSUFDWm5CLEVBQVNtQixHQUFNM0IsV0FBVyxHQUMxQixFQWNILEVDL0tHd0QsRUFBVUMsSUFLUCxDQUNMQSxTQUNBQyxLQU5RLEVBT1JyRCxNQU5VRCxJQU9WdUQsUUFOVyxJQ0xUQyxFQUFVLENBQUNDLEVBQVFDLEVBQUtDLEVBQUt2QyxFQUFHQyxLQUNwQyxNQUFNbkIsRUFBU3VELEVBQU94RCxNQUFNbUMsWUFFaEIsT0FBUnNCLEVBRUF4RCxFQUFPMEQsTUFBTXpDLEdBQ0pBLEVBQUssS0FBT0MsR0FBS0QsRUFBSyxLQUFPRSxJQUd0Q3NDLEVBQUlFLGFBQWEsUUFBUyw2QkFFMUJGLEVBQUlFLGFBQWEsUUFBUywyQkFHNUJILEVBQUlwRSxVQUFVUyxRQUFRNkQsTUFBTXpDLEdBQ25CQSxFQUFLLEtBQU9DLEdBQUtELEVBQUssS0FBT0UsS0FHdENzQyxFQUFJRSxhQUFhLFFBQVMseUJBQzVCLEVBcUJJQyxFQUFlTCxJQUNuQkEsRUFBT3hELE1BQU02QixjQW5CSSxDQUFDMkIsSUFDTkEsRUFBT3hELE1BQU1nQyxXQUN6QixNQUFNOEIsRUFBV04sRUFBT3hELE1BQU1pQyxXQUNaTSxPQUFPRyxLQUFLb0IsR0FFcEI3QyxTQUFTSyxJQUNqQixNQUFNekIsRUFBT2lFLEVBQVN4QyxHQUFNakMsVUFBVVEsS0FFdEMsR0FBb0IsSUFBaEJBLEVBQUtMLE9BQWMsQ0FDckIsTUFBTXVFLEVBQVFsRSxFQUFLLEdBQUcsR0FDaEJtRSxFQUFRbkUsRUFBSyxHQUFHLEdBQ3RCMkQsRUFBT3hELE1BQU0yQixVQUFVb0MsRUFBT0MsRUFBT0YsRUFBU3hDLEdBQ2hELElBR1UsRUFNWjJDLENBQVdULEdBRVgsTUFBTXhELEVBQVF3RCxFQUFPeEQsTUFBTWdDLFdBQ3JCa0MsRUFBWVYsRUFBT0osT0FDekIsSUFBSWUsRUFBZUMsU0FBU0MsZUFBZSxRQUFRSCxLQUVuRCxLQUFPQyxFQUFhRyxrQkFDbEJILEVBQWFJLFlBQVlKLEVBQWFHLGtCQUV4QyxJQUFLLElBQUl4QyxFQUFJLEVBQUdBLEVBQUk5QixFQUFNUixPQUFRc0MsSUFDaEMsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUkvQixFQUFNUixPQUFRdUMsSUFBSyxDQUNyQyxNQUFNeUMsRUFBU0osU0FBU0ssY0FBYyxPQUN0Q0QsRUFBT0UsVUFBVUMsSUFBSSxHQUFHVCxZQUV4Qk0sRUFBT1osYUFBYSxTQUFVLEdBQUc5QixLQUNqQzBDLEVBQU9aLGFBQWEsU0FBVSxHQUFHN0IsS0FFakN3QixFQUFRQyxFQUFReEQsRUFBTThCLEdBQUdDLEdBQUl5QyxFQUFRMUMsRUFBR0MsR0FFeENvQyxFQUFhUyxZQUFZSixFQUMzQixDQUdGLE9BQU9MLENBQVksRUE2RmZVLEVBQWFyQixJQUNIWSxTQUFTVSxpQkFBaUIsSUFBSXRCLEVBQU9KLGlCQUUzQ25DLFNBQVN1RCxJQUNmQSxFQUFPWixhQUFhLFdBQVksSUFDaENZLEVBQU9aLGFBQWEsUUFBUywwQkFBMEIsR0FDdkQsRUFpQ0VtQixFQUFlLENBQUNDLEVBQU1DLEVBQU1DLEtBQ2hDLElBQUlsRixFQUNBQyxFQUNBa0YsRUFZSixJQVZXLGVBQVBELEdBQ0ZsRixFQUFRaUYsRUFBS2pGLE1BQU1nQyxXQUNuQi9CLEVBQVNnRixFQUFLakYsTUFBTW1DLFlBQ3BCZ0QsRUFBWWYsU0FBU2dCLGNBQWMsU0FBU0gsRUFBSzdCLFlBRWpEcEQsRUFBUWdGLEVBQUtoRixNQUFNZ0MsV0FDbkIvQixFQUFTK0UsRUFBS2hGLE1BQU1tQyxZQUNwQmdELEVBQVlmLFNBQVNnQixjQUFjLFNBQVNKLEVBQUs1QixXQUc1QytCLEVBQVViLGtCQUNmYSxFQUFVWixZQUFZWSxFQUFVYixrQkFFbEMsSUFBSyxJQUFJeEMsRUFBSSxFQUFHQSxFQUFJOUIsRUFBTVIsT0FBUXNDLElBQ2hDLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJL0IsRUFBTVIsT0FBUXVDLElBQUssQ0FDckMsTUFBTWIsRUFBT2xCLEVBQU04QixHQUFHQyxHQUVoQnlDLEVBQVNKLFNBQVNLLGNBQWMsVUFDM0IsZUFBUFMsRUFDRlYsRUFBT0UsVUFBVUMsSUFBSSxHQUFHSyxFQUFLNUIsaUJBRTdCb0IsRUFBT0UsVUFBVUMsSUFBSSxHQUFHTSxFQUFLN0IsaUJBRy9Cb0IsRUFBT1osYUFBYSxTQUFVLEdBQUc5QixLQUNqQzBDLEVBQU9aLGFBQWEsU0FBVSxHQUFHN0IsS0FFakNzRCxFQUFXTCxFQUFNQyxFQUFNVCxHQUdaLE9BQVR0RCxHQUNBQSxFQUFLN0IsVUFBVUUsU0FBVyxHQUMxQjJCLEVBQUs3QixVQUFVUyxRQUFRNkQsTUFBTXpDLEdBQ3BCQSxFQUFLLEtBQU9ZLEdBQUtaLEVBQUssS0FBT2EsTUFHdEN5QyxFQUFPWixhQUFhLFFBQVMsMEJBQzdCWSxFQUFPWixhQUFhLFdBQVksS0FJaEMzRCxFQUFPMEQsTUFBTXpDLEdBQ0pBLEVBQUssS0FBT1ksR0FBS1osRUFBSyxLQUFPYSxNQUd0Q3lDLEVBQU9aLGFBQWEsUUFBUyw0QkFDN0JZLEVBQU9aLGFBQWEsV0FBWSxLQUdsQ3VCLEVBQVVQLFlBQVlKLEVBQ3hCLENBQ0YsRUFHSWEsRUFBYSxDQUFDTCxFQUFNQyxFQUFNVCxLQUM5QixNQUFNYyxFQUFTbEIsU0FBU2dCLGNBQWMsV0FDaENqRSxFQUFJb0UsU0FBU2YsRUFBT2dCLGFBQWEsV0FDakNwRSxFQUFJbUUsU0FBU2YsRUFBT2dCLGFBQWEsV0FDakNDLEVBQVNyQixTQUFTZ0IsY0FBYyxXQUNoQ00sRUFBU3RCLFNBQVNnQixjQUFjLGFBQ2hDTyxFQUFTdkIsU0FBU2dCLGNBQWMsZ0JBQ2hDUSxFQUFheEIsU0FBU2dCLGNBQWMsZ0JBQ3BDUyxFQUFPekIsU0FBU2dCLGNBQWMsUUFFcENaLEVBQU9zQixpQkFBaUIsU0FBVUMsSUFDaENBLEVBQUVDLGlCQUNGLE1BQU1DLEVBQVd6QixFQUFPZ0IsYUFBYSxTQUMvQk4sRUFBS1MsRUFBT0gsYUFBYSxXQUN6QlUsRUFBT0wsRUFBS0wsYUFBYSxTQUMvQixJQUFJeEYsRUFDQW1HLEVBR0ZuRyxFQURlLGVBQWJpRyxFQUNNakIsRUFBS2hGLE1BRUxpRixFQUFLakYsTUFHZm1HLEVBQVluRyxFQUFNZ0MsV0FFbEJoQyxFQUFNa0MsY0FBY2YsRUFBR0MsR0FDQyxPQUFwQitFLEVBQVVoRixHQUFHQyxJQUVieUQsRUFEZSxlQUFib0IsRUFDUWhCLEVBRUFELEdBR1pSLEVBQU9aLGFBQWEsUUFBUyw2QkFHM0JnQyxFQUFXUSxZQURBLFFBQVRGLEVBQ3VCLG1CQUVsQixlQUFQaEIsRUFDOEIscUJBQ0EscUJBR2hDSSxFQUFPZSxjQUVQN0IsRUFBT1osYUFBYSxRQUFTLDBCQUV6QjVELEVBQU1xQyxjQUNSbUMsRUFBT1osYUFBYSxRQUFTLDBCQUM3QjhCLEVBQU9XLFlBRUxaLEVBQU9XLFlBREUsZUFBUGxCLEVBQ21CLDhCQUVBLCtCQUczQixHQUNBLEVDalRFb0IsRUFBU2xDLFNBQVNnQixjQUFjLFVBRXRDa0IsRUFBT1IsaUJBQWlCLFlBQVksS0FDbENTLFFBQVFDLElBQUlGLEVBQU9HLE1BQU0sSUFHM0IsTUFBTUMsRUFBV3RDLFNBQVNnQixjQUFjLGNBQ2xDdUIsRUFBU3ZDLFNBQVNnQixjQUFjLFFBQ2hDd0IsRUFBU3hDLFNBQVNnQixjQUFjLFFBQ2hDeUIsRUFBYXpDLFNBQVNVLGlCQUFpQixZQUN2Q1ksRUFBU3RCLFNBQVNnQixjQUFjLGFBQ2hDLEVBQU9oQixTQUFTZ0IsY0FBYyxRQUNwQyxJQUFJMEIsRUFBWTNELEVBQU8sT0FDbkI0RCxFQUFZNUQsRUFBTyxPRDhDRCxJQUFDNkIsRUFBTUMsRUFBTkQsRUM1Q1Q4QixFRDRDZTdCLEVDNUNKOEIsRUQ2Q1IzQyxTQUFTZ0IsY0FBYyxpQkFFL0JVLGlCQUFpQixTQUFVQyxJQUNoQ0EsRUFBRUMsaUJBR0YsSUFBSWQsRUFEU2QsU0FBU2dCLGNBQWMsUUFDdEJJLGFBQWEsTUFFM0IsTUFBTXpCLEVBQVF3QixTQUFTbkIsU0FBU2dCLGNBQWMsV0FBV3FCLE9BQ25EekMsRUFBUXVCLFNBQVNuQixTQUFTZ0IsY0FBYyxXQUFXcUIsT0FDbkRPLEVBQVc1QyxTQUFTZ0IsY0FBYyxVQUFVcUIsTUFFNUNRLEVBQVM3QyxTQUFTZ0IsY0FBYyxnQkFBZ0JxQixNQUV0RCxJQUFJbkYsRUFFQ0EsRUFERSxtQkFBUDRELEVBQ1lGLEVBQUtoRixNQUFNaUMsV0FBVytFLEdBQ3RCL0IsRUFBS2pGLE1BQU1pQyxXQUFXK0UsR0FFbEMxRixFQUFLakMsVUFBVU8sWUFBY3FILEVBRXpCQyxPQUFPQyxNQUFNcEQsSUFBVW1ELE9BQU9DLE1BQU1uRCxLQUUzQixtQkFBUGtCLEdBQ0ZGLEVBQUtoRixNQUFNMkIsVUFBVW9DLEVBQU9DLEVBQU8xQyxHQUNuQ3VDLEVBQVltQixLQUVaQyxFQUFLakYsTUFBTTJCLFVBQVVvQyxFQUFPQyxFQUFPMUMsR0FDbkN1QyxFQUFZb0IsSUFFaEIsSUFJaUIsRUFBQ0QsRUFBTUMsS0FDMUIsTUFBTVksRUFBT3pCLFNBQVNnQixjQUFjLFFBQzlCZ0MsRUFBU2hELFNBQVNnQixjQUFjLFdBQ2hDaUMsRUFBT2pELFNBQVNnQixjQUFjLFFBQzlCUSxFQUFheEIsU0FBU2dCLGNBQWMsZ0JBRTFDLElBQUlrQyxHQUFjLEVBRWxCRixFQUFPdEIsaUJBQWlCLFNBQVVDLElBR2hDLElBQUlqQyxFQUZKaUMsRUFBRUMsaUJBR0YsTUFBTUUsRUFBT0wsRUFBS0wsYUFBYSxTQUMvQixJQUFJTixFQUFLbUMsRUFBSzdCLGFBQWEsTUFjM0IsR0FYSzFCLEVBREUsbUJBQVBvQixFQUNnQkYsRUFBS2hGLE1BQU1pQyxXQUNYZ0QsRUFBS2pGLE1BQU1pQyxXQUViTSxPQUFPQyxPQUFPc0IsR0FFdEI3QyxTQUFTSyxJQUNiLE1BQU16QixFQUFPeUIsRUFBS2pDLFVBQVVRLEtBQzVCLE9BQStCeUgsRUFBWCxJQUFoQnpILEVBQUtMLE1BQ3VCLElBRzlCOEgsRUFBYSxDQUNmLE1BQU1uRyxFQUFJaUQsU0FBU2dCLGNBQWMsV0FDM0JoRSxFQUFJZ0QsU0FBU2dCLGNBQWMsV0FDM0JtQyxFQUFNbkQsU0FBU2dCLGNBQWMsZUFZbkMsR0FWQWpFLEVBQUVzRixNQUFRLEdBQ1ZyRixFQUFFcUYsTUFBUSxHQUNWYyxFQUFJQyxnQkFBZ0IsWUFDcEJELEVBQUkzRCxhQUFhLFdBQVksSUFFbEIsbUJBQVBzQixJQUNGbUMsRUFBS3pELGFBQWEsS0FBTSxrQkFDeEJpQixFQUFVRyxJQUdDLFFBQVRrQixHQUF5QixtQkFBUGhCLEVBQXlCLENBQzdDbUMsRUFBS3pELGFBQWEsUUFBUyxrQkFDM0JpQixFQUFVSSxHQUNWLE1BQU1LLEVBQVNsQixTQUFTZ0IsY0FBYyxXQUN0Q1EsRUFBV1EsWUFBYyxxQkFDekJkLEVBQU9lLFdBQ1QsQ0FDRixNQUNFekUsTUFBTSxtQ0FDUixHQUNBLEVDbElKNkYsQ0FBYVgsRUFBV0MsR0Q4SUosRUFBQ1csRUFBTUMsS0FDekIsTUFBTTlCLEVBQU96QixTQUFTZ0IsY0FBYyxRQUM5QkUsRUFBU2xCLFNBQVNnQixjQUFjLFdBQ2hDd0MsRUFBYXhELFNBQVNnQixjQUFjLGdCQUMxQmhCLFNBQVNnQixjQUFjLFNBRS9CVSxpQkFBaUIsU0FBVUMsSUFDakNBLEVBQUVDLGlCQUNGLElBQUl4QyxFQUFTb0UsRUFBV3BDLGFBQWEsV0FFckMsR0FBZSxlQUFYaEMsRUFJRixPQUhBSyxFQUFZNkQsR0FDWjNDLEVBQWEyQyxFQUFNQyxFQUFNbkUsR0FDekJvRSxFQUFXaEUsYUFBYSxVQUFXLFVBQVU4RCxFQUFLdEUsVUFDM0NrQyxFQUFPdUMsUUFDVCxHQUFlLGVBQVhyRSxFQUF5QixDQUNsQyxNQUFNMEMsRUFBT0wsRUFBS0wsYUFBYSxTQUUvQixPQURBb0MsRUFBV2hFLGFBQWEsVUFBVyxVQUFVK0QsRUFBS3ZFLFVBQ3JDLFFBQVQ4QyxHQTBJTSxFQUFDNEIsRUFBU0MsS0FDeEIsTUFBTS9ILEVBQVE4SCxFQUFROUgsTUFDaEJtRyxFQUFZbkcsRUFBTWdDLFdBQ2xCL0IsRUFBU0QsRUFBTW1DLFlBQ2ZqQyxFQUFPRixFQUFNb0MsVUFDYndGLEVBQWF4RCxTQUFTZ0IsY0FBYyxnQkFDcENLLEVBQVNyQixTQUFTZ0IsY0FBYyxXQUNoQ00sRUFBU3RCLFNBQVNnQixjQUFjLGFBQ3RDLElBQUlqRSxFQUFJMEIsS0FBS0MsTUFBc0IsR0FBaEJELEtBQUtFLFVBQ3BCM0IsRUFBSXlCLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxVQUNwQmlGLEdBQU8sRUFFWCxNQUFnQixJQUFUQSxHQUNMLEdBQ0UvSCxFQUFPMEQsTUFBTXpDLEdBQ0pBLEVBQUssS0FBT0MsR0FBS0QsRUFBSyxLQUFPRSxLQUV0Q2xCLEVBQUt5RCxNQUFNekMsR0FDRkEsRUFBSyxLQUFPQyxHQUFLRCxFQUFLLEtBQU9FLElBR3RDRCxFQUFJMEIsS0FBS0MsTUFBc0IsR0FBaEJELEtBQUtFLFVBQ3BCM0IsRUFBSXlCLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxlQU10QixHQUZBL0MsRUFBTWtDLGNBQWNmLEVBQUdDLEdBRUMsT0FBcEIrRSxFQUFVaEYsR0FBR0MsR0FBYSxDQUM1QixNQUFNOEQsRUFBSyxVQUFVNkMsRUFBUTNFLFNBQzdCd0UsRUFBV2hFLGFBQWEsVUFBVyxVQUFVa0UsRUFBUTFFLFVBQ3JEUyxFQUFZaUUsR0FDWi9DLEVBQWErQyxFQUFTQyxFQUFTN0MsR0FDL0I4QyxHQUFPLENBQ1QsTUFDTUYsRUFBUTlILE1BQU1xQyxhQUNoQjJGLEdBQU8sRUFDUHRDLEVBQU9XLFlBQ1BaLEVBQU9XLFlBQWMsa0JBRXJCakYsRUFBSTBCLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxVQUNwQjNCLEVBQUl5QixLQUFLQyxNQUFzQixHQUFoQkQsS0FBS0UsVUFHMUIsRUFyTE1rRixDQUFRUCxFQUFNQyxHQUNQckMsRUFBT3VDLFVBRWRoRSxFQUFZOEQsR0FDWjVDLEVBQWEyQyxFQUFNQyxFQUFNbkUsR0FDbEI4QixFQUFPdUMsUUFFbEIsSUFDQSxFQ3hLSkssQ0FBWXBCLEVBQVdDLEdEd1ZILEVBQUMvQixFQUFNQyxLQUN6QixNQUFNb0MsRUFBT2pELFNBQVNnQixjQUFjLFFBQ3BCaEIsU0FBU2dCLGNBQWMsV0FFL0JVLGlCQUFpQixTQUFVQyxJQUNqQ0EsRUFBRUMsaUJBSVMsbUJBRkFxQixFQUFLN0IsYUFBYSxPQUczQlIsRUFBS2hGLE1BQU15QyxhQUNYb0IsRUFBWW1CLEtBRVpDLEVBQUtqRixNQUFNeUMsYUFDWG9CLEVBQVlvQixHQUNkLEdBQ0EsRUN2V0prRCxDQUFZckIsRUFBV0MsR0FDdkJsRCxFQUFZaUQsR0FDWmpELEVBQVlrRCxHQUVaSixFQUFPYixpQkFBaUIsU0FBVUMsSUFDaENBLEVBQUVDLGlCQUNLVSxFQUFTbUIsV0FHbEJqQixFQUFPZCxpQkFBaUIsU0FBVUMsSUFDaENBLEVBQUVDLGlCQUNGLE1BQU1ILEVBQU96QixTQUFTZ0IsY0FBYyxRRHVSckIsSUFBQzVCLEVDalJoQixPRGlSZ0JBLEVDclJQdUQsR0RzUkYvRyxNQUFNeUMsYUFDYm9CLEVBQVlMLEdBQ1pxQixFQUFVckIsR0N0UlZxQyxFQUFLbkIsVUFBVUMsSUFBSSxPQUVaK0IsRUFBU21CLE9BQU8sSUFHekJoQixFQUFXNUYsU0FBU21HLEdBQ2xCQSxFQUFPdEIsaUJBQWlCLFNBQVVDLElBQ2hDQSxFQUFFQyxpQkFDRixNQUFNSCxFQUFPekIsU0FBU2dCLGNBQWMsUUFDOUJPLEVBQVN2QixTQUFTZ0IsY0FBYyxnQkFDaENqRSxFQUFJaUQsU0FBU2dCLGNBQWMsV0FDM0JoRSxFQUFJZ0QsU0FBU2dCLGNBQWMsV0FDM0JtQyxFQUFNbkQsU0FBU2dCLGNBQWMsZUFFbkNNLEVBQU9tQyxRQUVQLEVBQUtqRSxhQUFhLEtBQU0sa0JBQ3hCLEVBQUs0RCxnQkFBZ0IsU0FDckIzQixFQUFLbkIsVUFBVTBELE9BQU8sT0FDdEJ6QyxFQUFPL0IsYUFBYSxVQUFXLGNBRS9CekMsRUFBRXNGLE1BQVEsR0FDVnJGLEVBQUVxRixNQUFRLEdBQ1ZjLEVBQUlDLGdCQUFnQixZQUNwQkQsRUFBSTNELGFBQWEsV0FBWSxJQUU3QmtELEVBQVU5RyxNQUFNa0QsYUFDaEI2RCxFQUFVL0csTUFBTWtELGFBRWhCVyxFQUFZaUQsR0FDWmpELEVBQVlrRCxHQUNaTCxFQUFTTCxXQUFXLE1BSXhCakMsU0FBUzBCLGlCQUFpQixTQUFVWSxFQUFTTCxZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL0RPTS5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gKG4pID0+IHtcbiAgbGV0IHNoaXBPYmogPSB7fTtcblxuICBzaGlwT2JqW1wibGVuZ3RoXCJdID0gbjtcbiAgc2hpcE9ialtcImhpdENvdW50XCJdID0gMDtcbiAgc2hpcE9ialtcInN1bmtcIl0gPSBmYWxzZTtcbiAgc2hpcE9ialtcIm9yaWVudGF0aW9uXCJdID0gXCJob3Jpem9udGFsXCI7XG4gIHNoaXBPYmpbXCJjb21wXCJdID0gW107XG4gIHNoaXBPYmpbXCJoaXRDb29yXCJdID0gW107XG5cbiAgY29uc3QgZ2V0U2hpcCA9ICgpID0+IHNoaXBPYmo7XG5cbiAgY29uc3QgaGl0ID0gKCkgPT4ge1xuICAgIHNoaXBPYmouaGl0Q291bnQgKz0gMTtcbiAgICBpZiAoc2hpcE9iai5oaXRDb3VudCA9PT0gc2hpcE9iai5sZW5ndGgpIHNoaXBPYmouc3VuayA9IHRydWU7XG4gIH07XG5cbiAgY29uc3QgaXNTdW5rID0gKCkgPT4ge1xuICAgIHJldHVybiBzaGlwT2JqLnN1bmsgPT09IHRydWUgPyB0cnVlIDogZmFsc2U7XG4gIH07XG5cbiAgY29uc3QgcmVzZXRTaGlwID0gKCkgPT4ge1xuICAgIHNoaXBPYmoubGVuZ3RoID0gbjtcbiAgICBzaGlwT2JqLmhpdENvdW50ID0gMDtcbiAgICBzaGlwT2JqLnN1bmsgPSBmYWxzZTtcbiAgICBzaGlwT2JqLm9yaWVudGF0aW9uID0gXCJob3Jpem9udGFsXCI7XG4gICAgc2hpcE9iai5jb21wID0gW107XG4gICAgc2hpcE9iai5oaXRDb29yID0gW107XG5cbiAgICByZXR1cm4gc2hpcE9iajtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFNoaXAsXG4gICAgaGl0LFxuICAgIGlzU3VuayxcbiAgICByZXNldFNoaXAsXG4gIH07XG59O1xuXG5leHBvcnQgeyBTaGlwIH07XG4iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuXG5jb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG4gIGxldCBib2FyZCA9IFtdO1xuICBsZXQgbWlzc2VzID0gW107XG4gIGxldCBoaXRzID0gW107XG5cbiAgbGV0IGFsbFNoaXBzID0ge1xuICAgIGJhdHRsZXNoaXA6IFNoaXAoNCksXG4gICAgY3J1aXNlcl9JOiBTaGlwKDMpLFxuICAgIGNydWlzZXJfSUk6IFNoaXAoMyksXG4gICAgZGVzdHJveWVyX0k6IFNoaXAoMiksXG4gICAgZGVzdHJveWVyX0lJOiBTaGlwKDIpLFxuICAgIGRlc3Ryb3llcl9JSUk6IFNoaXAoMiksXG4gICAgc3VibWFyaW5lX0k6IFNoaXAoMSksXG4gICAgc3VibWFyaW5lX0lJOiBTaGlwKDEpLFxuICAgIHN1Ym1hcmluZV9JSUk6IFNoaXAoMSksXG4gICAgc3VibWFyaW5lX0lWOiBTaGlwKDEpLFxuICB9O1xuXG4gIGNvbnN0IGdldEJvYXJkID0gKCkgPT4gYm9hcmQ7XG4gIGNvbnN0IGdldE1pc3NlcyA9ICgpID0+IG1pc3NlcztcbiAgY29uc3QgZ2V0U2hpcHMgPSAoKSA9PiBhbGxTaGlwcztcbiAgY29uc3QgZ2V0SGl0cyA9ICgpID0+IGhpdHM7XG5cbiAgY29uc3QgY3JlYXRlQm9hcmQgPSAoKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBib2FyZFtpXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGJvYXJkW2ldW2pdID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYm9hcmQ7XG4gIH07XG5cbiAgY29uc3QgaXNFbXB0eSA9ICh4LCB5KSA9PiB7XG4gICAgcmV0dXJuIGJvYXJkW3hdW3ldID09PSBudWxsID8gdHJ1ZSA6IGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IGlzRml0ID0gKGFycikgPT4ge1xuICAgIGxldCBzdGF0dXMgPSB0cnVlO1xuXG4gICAgYXJyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGlmIChpdGVtWzBdID4gOSB8fCBpdGVtWzFdID4gOSB8fCAhaXNFbXB0eShpdGVtWzBdLCBpdGVtWzFdKSlcbiAgICAgICAgcmV0dXJuIChzdGF0dXMgPSBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3RhdHVzO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZUNvbXAgPSAoeCwgeSwgc2hpcCkgPT4ge1xuICAgIGNvbnN0IGxlbmd0aCA9IHNoaXAuZ2V0U2hpcCgpLmxlbmd0aDtcbiAgICBjb25zdCBvcmllbnRhdGlvbiA9IHNoaXAuZ2V0U2hpcCgpLm9yaWVudGF0aW9uO1xuICAgIGxldCB0ZW1wID0gW107XG4gICAgbGV0IGEgPSB4O1xuICAgIGxldCBiID0geTtcblxuICAgIGlmIChvcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgIHdoaWxlIChiICE9PSB5ICsgbGVuZ3RoKSB7XG4gICAgICAgIHRlbXAucHVzaChbeCwgYl0pO1xuICAgICAgICBiICs9IDE7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlIChhICE9PSB4ICsgbGVuZ3RoKSB7XG4gICAgICAgIHRlbXAucHVzaChbYSwgeV0pO1xuICAgICAgICBhICs9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRlbXA7XG4gIH07XG5cbiAgY29uc3QgcGxhY2VTaGlwID0gKHgsIHksIHNoaXApID0+IHtcbiAgICBsZXQgdGVtcCA9IFtdO1xuICAgIGxldCBzdGF0dXMgPSB0cnVlO1xuXG4gICAgaWYgKHkgKyBsZW5ndGggLSAxID4gOSB8fCB4ID4gOSB8fCB4ICsgbGVuZ3RoIC0gMSA+IDkgfHwgeSA+IDkpIHtcbiAgICAgIHJldHVybiBhbGVydChcIlNoaXAgaXMgb3V0IG9mIGJvdW5kXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZW1wID0gY3JlYXRlQ29tcCh4LCB5LCBzaGlwKTtcbiAgICAgIHN0YXR1cyA9IGlzRml0KHRlbXApO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7XG4gICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgdGVtcCA9IFtdO1xuICAgICAgcmV0dXJuIGFsZXJ0KFwic3F1YXJlIGlzIGFscmVhZHkgb2NjdXBpZWRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNoaXAuZ2V0U2hpcCgpLmNvbXAgPSB0ZW1wO1xuXG4gICAgICBzaGlwLmdldFNoaXAoKS5jb21wLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgYm9hcmRbaXRlbVswXV1baXRlbVsxXV0gPSBzaGlwO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvYXJkO1xuICB9O1xuXG4gIGNvbnN0IHBvcHVsYXRlQmQgPSAoKSA9PiB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGFsbFNoaXBzKTtcbiAgICBjb25zdCBkaXJlY3Rpb25zID0gW1wiaG9yaXpvbnRhbFwiLCBcInZlcnRpY2FsXCJdO1xuXG4gICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHNoaXAgPSBhbGxTaGlwc1trZXldO1xuICAgICAgY29uc3QgbGVuZ3RoID0gc2hpcC5nZXRTaGlwKCkubGVuZ3RoO1xuXG4gICAgICBsZXQgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICAgIGxldCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgbGV0IHogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKTtcblxuICAgICAgc2hpcC5nZXRTaGlwKCkub3JpZW50YXRpb24gPSBkaXJlY3Rpb25zW3pdO1xuICAgICAgbGV0IHRlbXAgPSBjcmVhdGVDb21wKHgsIHksIHNoaXApO1xuICAgICAgbGV0IGZpdCA9IGlzRml0KHRlbXApO1xuXG4gICAgICB3aGlsZSAoeSArIGxlbmd0aCAtIDEgPiA5IHx8IHggKyBsZW5ndGggLSAxID4gOSB8fCBmaXQgPT09IGZhbHNlKSB7XG4gICAgICAgIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICAgIHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICAgIHogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKTtcblxuICAgICAgICBzaGlwLmdldFNoaXAoKS5vcmllbnRhdGlvbiA9IGRpcmVjdGlvbnNbel07XG4gICAgICAgIHRlbXAgPSBjcmVhdGVDb21wKHgsIHksIHNoaXApO1xuICAgICAgICBmaXQgPSBpc0ZpdCh0ZW1wKTtcbiAgICAgIH1cblxuICAgICAgcGxhY2VTaGlwKHgsIHksIHNoaXApO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGJvYXJkO1xuICB9O1xuXG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoeCwgeSkgPT4ge1xuICAgIGlmIChib2FyZFt4XVt5XSA9PT0gbnVsbCkgbWlzc2VzLnB1c2goW3gsIHldKTtcbiAgICBlbHNlIHtcbiAgICAgIGhpdHMucHVzaChbeCwgeV0pO1xuICAgICAgYm9hcmRbeF1beV0uaGl0KCk7XG4gICAgICBib2FyZFt4XVt5XS5nZXRTaGlwKCkuaGl0Q29vci5wdXNoKFt4LCB5XSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvYXJkO1xuICB9O1xuXG4gIGNvbnN0IGlzQWxsU3VuayA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwcyA9IE9iamVjdC52YWx1ZXMoYWxsU2hpcHMpO1xuICAgIGxldCBzdGF0dXMgPSB0cnVlO1xuXG4gICAgc2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgaWYgKCFzaGlwLmlzU3VuaygpKSB7XG4gICAgICAgIHJldHVybiAoc3RhdHVzID0gZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0YXR1cztcbiAgfTtcblxuICBjb25zdCByZXNldEJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhbGxTaGlwcyk7XG4gICAgYm9hcmQgPSBbXTtcbiAgICBtaXNzZXMgPSBbXTtcbiAgICBoaXRzID0gW107XG5cbiAgICBrZXlzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIGFsbFNoaXBzW3NoaXBdLnJlc2V0U2hpcCgpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlQm9hcmQsXG4gICAgcGxhY2VTaGlwLFxuICAgIGdldEJvYXJkLFxuICAgIGdldFNoaXBzLFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgZ2V0TWlzc2VzLFxuICAgIGdldEhpdHMsXG4gICAgaXNBbGxTdW5rLFxuICAgIHBvcHVsYXRlQmQsXG4gICAgcmVzZXRCb2FyZCxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IEdhbWVib2FyZCB9O1xuIiwiaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5cbmNvbnN0IFBsYXllciA9IChudW1iZXIpID0+IHtcbiAgbGV0IHdpbiA9IGZhbHNlO1xuICBsZXQgYm9hcmQgPSBHYW1lYm9hcmQoKTtcbiAgbGV0IGlzQ29tcCA9IGZhbHNlO1xuXG4gIHJldHVybiB7XG4gICAgbnVtYmVyLFxuICAgIHdpbixcbiAgICBib2FyZCxcbiAgICBpc0NvbXAsXG4gIH07XG59O1xuXG5leHBvcnQgeyBQbGF5ZXIgfTtcbiIsImNvbnN0IGZpbGxTcXIgPSAocGxheWVyLCBzcXIsIHRhZywgeCwgeSkgPT4ge1xuICBjb25zdCBtaXNzZXMgPSBwbGF5ZXIuYm9hcmQuZ2V0TWlzc2VzKCk7XG5cbiAgaWYgKHNxciA9PT0gbnVsbCkge1xuICAgIGlmIChcbiAgICAgIG1pc3Nlcy5maW5kKChpdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiBpdGVtWzBdID09PSB4ICYmIGl0ZW1bMV0gPT09IHk7XG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGFnLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogeWVsbG93O1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFnLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogYmx1ZTtcIik7XG4gICAgfVxuICB9IGVsc2UgaWYgKFxuICAgIHNxci5nZXRTaGlwKCkuaGl0Q29vci5maW5kKChpdGVtKSA9PiB7XG4gICAgICByZXR1cm4gaXRlbVswXSA9PT0geCAmJiBpdGVtWzFdID09PSB5O1xuICAgIH0pXG4gICkge1xuICAgIHRhZy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6IHJlZDtcIik7XG4gIH1cbn07XG5cbmNvbnN0IHJlbmRlclNoaXAgPSAocGxheWVyKSA9PiB7XG4gIGxldCBib2FyZCA9IHBsYXllci5ib2FyZC5nZXRCb2FyZCgpO1xuICBjb25zdCBzaGlwc09iaiA9IHBsYXllci5ib2FyZC5nZXRTaGlwcygpO1xuICBjb25zdCBzaGlwc0xpc3QgPSBPYmplY3Qua2V5cyhzaGlwc09iaik7XG5cbiAgc2hpcHNMaXN0LmZvckVhY2goKHNoaXApID0+IHtcbiAgICBjb25zdCBjb21wID0gc2hpcHNPYmpbc2hpcF0uZ2V0U2hpcCgpLmNvbXA7XG5cbiAgICBpZiAoY29tcC5sZW5ndGggIT09IDApIHtcbiAgICAgIGNvbnN0IHhDb29yID0gY29tcFswXVswXTtcbiAgICAgIGNvbnN0IHlDb29yID0gY29tcFswXVsxXTtcbiAgICAgIHBsYXllci5ib2FyZC5wbGFjZVNoaXAoeENvb3IsIHlDb29yLCBzaGlwc09ialtzaGlwXSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gYm9hcmQ7XG59O1xuXG5jb25zdCByZW5kZXJCb2FyZCA9IChwbGF5ZXIpID0+IHtcbiAgcGxheWVyLmJvYXJkLmNyZWF0ZUJvYXJkKCk7XG5cbiAgcmVuZGVyU2hpcChwbGF5ZXIpO1xuXG4gIGNvbnN0IGJvYXJkID0gcGxheWVyLmJvYXJkLmdldEJvYXJkKCk7XG4gIGNvbnN0IHBsYXllck51bSA9IHBsYXllci5udW1iZXI7XG4gIGxldCBjdXJyZW50Qm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgYm9hcmQke3BsYXllck51bX1gKTtcblxuICB3aGlsZSAoY3VycmVudEJvYXJkLmxhc3RFbGVtZW50Q2hpbGQpXG4gICAgY3VycmVudEJvYXJkLnJlbW92ZUNoaWxkKGN1cnJlbnRCb2FyZC5sYXN0RWxlbWVudENoaWxkKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZC5sZW5ndGg7IGorKykge1xuICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKGAke3BsYXllck51bX0tc3F1YXJlYCk7XG5cbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiwgYCR7aX1gKTtcbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiwgYCR7an1gKTtcblxuICAgICAgZmlsbFNxcihwbGF5ZXIsIGJvYXJkW2ldW2pdLCBzcXVhcmUsIGksIGopO1xuXG4gICAgICBjdXJyZW50Qm9hcmQuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY3VycmVudEJvYXJkO1xufTtcblxuY29uc3QgaW5pdFBsYWNlU2hpcCA9IChwT25lLCBwVHdvKSA9PiB7XG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwbGFjZVNoaXBCdG5gKTtcblxuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIGxldCBpZCA9IGZvcm0uZ2V0QXR0cmlidXRlKFwiaWRcIik7XG5cbiAgICBjb25zdCB4Q29vciA9IHBhcnNlSW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN5LWNvb3JgKS52YWx1ZSk7XG4gICAgY29uc3QgeUNvb3IgPSBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjeC1jb29yYCkudmFsdWUpO1xuICAgIGNvbnN0IHNoaXBOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3NoaXBzYCkudmFsdWU7XG5cbiAgICBjb25zdCBvcmllbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjb3JpZW50YXRpb25gKS52YWx1ZTtcblxuICAgIGxldCBzaGlwO1xuICAgIGlkID09PSBcInBsYXllck9uZS1mb3JtXCJcbiAgICAgID8gKHNoaXAgPSBwT25lLmJvYXJkLmdldFNoaXBzKClbc2hpcE5hbWVdKVxuICAgICAgOiAoc2hpcCA9IHBUd28uYm9hcmQuZ2V0U2hpcHMoKVtzaGlwTmFtZV0pO1xuXG4gICAgc2hpcC5nZXRTaGlwKCkub3JpZW50YXRpb24gPSBvcmllbnQ7XG5cbiAgICBpZiAoTnVtYmVyLmlzTmFOKHhDb29yKSB8fCBOdW1iZXIuaXNOYU4oeUNvb3IpKSByZXR1cm47XG4gICAgZWxzZSB7XG4gICAgICBpZiAoaWQgPT09IFwicGxheWVyT25lLWZvcm1cIikge1xuICAgICAgICBwT25lLmJvYXJkLnBsYWNlU2hpcCh4Q29vciwgeUNvb3IsIHNoaXApO1xuICAgICAgICByZW5kZXJCb2FyZChwT25lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBUd28uYm9hcmQucGxhY2VTaGlwKHhDb29yLCB5Q29vciwgc2hpcCk7XG4gICAgICAgIHJlbmRlckJvYXJkKHBUd28pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG5jb25zdCBpbml0RmluU2V0dXAgPSAocE9uZSwgcFR3bykgPT4ge1xuICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIik7XG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNmaW5CdG5gKTtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGZvcm1gKTtcbiAgY29uc3QgcGxheWVyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxheWVyLW5hbWVcIik7XG5cbiAgbGV0IGlzQWxsUGxhY2VkID0gZmFsc2U7XG5cbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGxldCBzaGlwc09iajtcbiAgICBjb25zdCBtb2RlID0gbWFpbi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICBsZXQgaWQgPSBmb3JtLmdldEF0dHJpYnV0ZShcImlkXCIpO1xuXG4gICAgaWQgPT09IFwicGxheWVyT25lLWZvcm1cIlxuICAgICAgPyAoc2hpcHNPYmogPSBwT25lLmJvYXJkLmdldFNoaXBzKCkpXG4gICAgICA6IChzaGlwc09iaiA9IHBUd28uYm9hcmQuZ2V0U2hpcHMoKSk7XG5cbiAgICBjb25zdCBzaGlwcyA9IE9iamVjdC52YWx1ZXMoc2hpcHNPYmopO1xuXG4gICAgc2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgY29uc3QgY29tcCA9IHNoaXAuZ2V0U2hpcCgpLmNvbXA7XG4gICAgICBpZiAoY29tcC5sZW5ndGggPT09IDApIHJldHVybiAoaXNBbGxQbGFjZWQgPSBmYWxzZSk7XG4gICAgICBlbHNlIHJldHVybiAoaXNBbGxQbGFjZWQgPSB0cnVlKTtcbiAgICB9KTtcblxuICAgIGlmIChpc0FsbFBsYWNlZCkge1xuICAgICAgY29uc3QgeCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjeC1jb29yXCIpO1xuICAgICAgY29uc3QgeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjeS1jb29yXCIpO1xuICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNiYXR0bGVzaGlwXCIpO1xuXG4gICAgICB4LnZhbHVlID0gXCJcIjtcbiAgICAgIHkudmFsdWUgPSBcIlwiO1xuICAgICAgb3B0LnJlbW92ZUF0dHJpYnV0ZShcInNlbGVjdGVkXCIpO1xuICAgICAgb3B0LnNldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIsIFwiXCIpO1xuXG4gICAgICBpZiAoaWQgPT09IFwicGxheWVyT25lLWZvcm1cIikge1xuICAgICAgICBmb3JtLnNldEF0dHJpYnV0ZShcImlkXCIsIFwicGxheWVyVHdvLWZvcm1cIik7XG4gICAgICAgIGhpZGVCb2FyZChwT25lKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1vZGUgPT09IFwicHZjXCIgfHwgaWQgPT09IFwicGxheWVyVHdvLWZvcm1cIikge1xuICAgICAgICBmb3JtLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZGlzcGxheTogbm9uZTtcIik7XG4gICAgICAgIGhpZGVCb2FyZChwVHdvKTtcbiAgICAgICAgY29uc3QgZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kaWFsb2dcIik7XG4gICAgICAgIHBsYXllck5hbWUudGV4dENvbnRlbnQgPSBcIlBsYXllciBPbmVgcyB0dXJuIVwiO1xuICAgICAgICBkaWFsb2cuc2hvd01vZGFsKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KFwiUGxlYXNlIHBsYWNlIGFsbCB0aGUgc2hpcHMgZmlyc3RcIik7XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IGhpZGVCb2FyZCA9IChwbGF5ZXIpID0+IHtcbiAgbGV0IHNxdWFyZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtwbGF5ZXIubnVtYmVyfS1zcXVhcmVgKTtcblxuICBzcXVhcmVzLmZvckVhY2goKHNxdWFyZSkgPT4ge1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiBncmF5O1wiKTtcbiAgfSk7XG59O1xuXG5jb25zdCBpbml0cGxheUJ0biA9IChQT25lLCBQVHdvKSA9PiB7XG4gIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpblwiKTtcbiAgY29uc3QgZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kaWFsb2dcIik7XG4gIGNvbnN0IHBsYXlXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYXktd2luZG93XCIpO1xuICBjb25zdCBwbGF5QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5XCIpO1xuXG4gIHBsYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBwbGF5ZXIgPSBwbGF5V2luZG93LmdldEF0dHJpYnV0ZShcImRhdGEtaWRcIik7XG5cbiAgICBpZiAocGxheWVyID09PSBcInBsYXllci1Ud29cIikge1xuICAgICAgcmVuZGVyQm9hcmQoUE9uZSk7XG4gICAgICByZW5kZXJQbGF5QmQoUE9uZSwgUFR3bywgcGxheWVyKTtcbiAgICAgIHBsYXlXaW5kb3cuc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLCBgcGxheWVyLSR7UE9uZS5udW1iZXJ9YCk7XG4gICAgICByZXR1cm4gZGlhbG9nLmNsb3NlKCk7XG4gICAgfSBlbHNlIGlmIChwbGF5ZXIgPT09IFwicGxheWVyLU9uZVwiKSB7XG4gICAgICBjb25zdCBtb2RlID0gbWFpbi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgIHBsYXlXaW5kb3cuc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLCBgcGxheWVyLSR7UFR3by5udW1iZXJ9YCk7XG4gICAgICBpZiAobW9kZSA9PT0gXCJwdmNcIikge1xuICAgICAgICBhdXRvQXRrKFBPbmUsIFBUd28pO1xuICAgICAgICByZXR1cm4gZGlhbG9nLmNsb3NlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW5kZXJCb2FyZChQVHdvKTtcbiAgICAgICAgcmVuZGVyUGxheUJkKFBPbmUsIFBUd28sIHBsYXllcik7XG4gICAgICAgIHJldHVybiBkaWFsb2cuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgcmVuZGVyUGxheUJkID0gKHBPbmUsIHBUd28sIGlkKSA9PiB7XG4gIGxldCBib2FyZDtcbiAgbGV0IG1pc3NlcztcbiAgbGV0IGN1cnJCb2FyZDtcblxuICBpZiAoaWQgPT09IFwicGxheWVyLVR3b1wiKSB7XG4gICAgYm9hcmQgPSBwVHdvLmJvYXJkLmdldEJvYXJkKCk7XG4gICAgbWlzc2VzID0gcFR3by5ib2FyZC5nZXRNaXNzZXMoKTtcbiAgICBjdXJyQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjYm9hcmQke3BUd28ubnVtYmVyfWApO1xuICB9IGVsc2Uge1xuICAgIGJvYXJkID0gcE9uZS5ib2FyZC5nZXRCb2FyZCgpO1xuICAgIG1pc3NlcyA9IHBPbmUuYm9hcmQuZ2V0TWlzc2VzKCk7XG4gICAgY3VyckJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2JvYXJkJHtwT25lLm51bWJlcn1gKTtcbiAgfVxuXG4gIHdoaWxlIChjdXJyQm9hcmQubGFzdEVsZW1lbnRDaGlsZClcbiAgICBjdXJyQm9hcmQucmVtb3ZlQ2hpbGQoY3VyckJvYXJkLmxhc3RFbGVtZW50Q2hpbGQpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmQubGVuZ3RoOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvYXJkLmxlbmd0aDsgaisrKSB7XG4gICAgICBjb25zdCBpdGVtID0gYm9hcmRbaV1bal07XG5cbiAgICAgIGNvbnN0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBpZiAoaWQgPT09IFwicGxheWVyLU9uZVwiKSB7XG4gICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKGAke3BPbmUubnVtYmVyfS1zcXVhcmVgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKGAke3BUd28ubnVtYmVyfS1zcXVhcmVgKTtcbiAgICAgIH1cblxuICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImRhdGEteFwiLCBgJHtpfWApO1xuICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImRhdGEteVwiLCBgJHtqfWApO1xuXG4gICAgICBpbml0U3FyQnRuKHBPbmUsIHBUd28sIHNxdWFyZSk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgaXRlbSAhPT0gbnVsbCAmJlxuICAgICAgICBpdGVtLmdldFNoaXAoKS5oaXRDb3VudCA+IDAgJiZcbiAgICAgICAgaXRlbS5nZXRTaGlwKCkuaGl0Q29vci5maW5kKChpdGVtKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW1bMF0gPT09IGkgJiYgaXRlbVsxXSA9PT0gajtcbiAgICAgICAgfSlcbiAgICAgICkge1xuICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XCIpO1xuICAgICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgbWlzc2VzLmZpbmQoKGl0ZW0pID0+IHtcbiAgICAgICAgICByZXR1cm4gaXRlbVswXSA9PT0gaSAmJiBpdGVtWzFdID09PSBqO1xuICAgICAgICB9KVxuICAgICAgKSB7XG4gICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6IGdyZWVuO1wiKTtcbiAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgfVxuXG4gICAgICBjdXJyQm9hcmQuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IGluaXRTcXJCdG4gPSAocE9uZSwgcFR3bywgc3F1YXJlKSA9PiB7XG4gIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlhbG9nXCIpO1xuICBjb25zdCB4ID0gcGFyc2VJbnQoc3F1YXJlLmdldEF0dHJpYnV0ZShcImRhdGEteFwiKSk7XG4gIGNvbnN0IHkgPSBwYXJzZUludChzcXVhcmUuZ2V0QXR0cmlidXRlKFwiZGF0YS15XCIpKTtcbiAgY29uc3Qgd2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW5uZXJcIik7XG4gIGNvbnN0IGVuZE1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZW5kLWdhbWVcIik7XG4gIGNvbnN0IHdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheS13aW5kb3dcIik7XG4gIGNvbnN0IHBsYXllck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci1uYW1lXCIpO1xuICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIik7XG5cbiAgc3F1YXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBzcXVhcmVJZCA9IHNxdWFyZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICBjb25zdCBpZCA9IHdpbmRvdy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpO1xuICAgIGNvbnN0IG1vZGUgPSBtYWluLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO1xuICAgIGxldCBib2FyZDtcbiAgICBsZXQgYm9hcmRMaXN0O1xuXG4gICAgaWYgKHNxdWFyZUlkID09PSBcIk9uZS1zcXVhcmVcIikge1xuICAgICAgYm9hcmQgPSBwT25lLmJvYXJkO1xuICAgIH0gZWxzZSB7XG4gICAgICBib2FyZCA9IHBUd28uYm9hcmQ7XG4gICAgfVxuXG4gICAgYm9hcmRMaXN0ID0gYm9hcmQuZ2V0Qm9hcmQoKTtcblxuICAgIGJvYXJkLnJlY2VpdmVBdHRhY2soeCwgeSk7XG4gICAgaWYgKGJvYXJkTGlzdFt4XVt5XSA9PT0gbnVsbCkge1xuICAgICAgaWYgKHNxdWFyZUlkID09PSBcIk9uZS1zcXVhcmVcIikge1xuICAgICAgICBoaWRlQm9hcmQocFR3byk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoaWRlQm9hcmQocE9uZSk7XG4gICAgICB9XG5cbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6IHllbGxvdztcIik7XG5cbiAgICAgIGlmIChtb2RlID09PSBcInB2Y1wiKSB7XG4gICAgICAgIHBsYXllck5hbWUudGV4dENvbnRlbnQgPSBcIkNvbXB1dGVyYHMgdHVybiFcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlkID09PSBcInBsYXllci1PbmVcIlxuICAgICAgICAgID8gKHBsYXllck5hbWUudGV4dENvbnRlbnQgPSBcIlBsYXllciBUd29gcyB0dXJuIVwiKVxuICAgICAgICAgIDogKHBsYXllck5hbWUudGV4dENvbnRlbnQgPSBcIlBsYXllciBPbmVgcyB0dXJuIVwiKTtcbiAgICAgIH1cblxuICAgICAgZGlhbG9nLnNob3dNb2RhbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XCIpO1xuXG4gICAgICBpZiAoYm9hcmQuaXNBbGxTdW5rKCkpIHtcbiAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogcmVkO1wiKTtcbiAgICAgICAgZW5kTXNnLnNob3dNb2RhbCgpO1xuICAgICAgICBpZiAoaWQgPT09IFwicGxheWVyLVR3b1wiKSB7XG4gICAgICAgICAgd2lubmVyLnRleHRDb250ZW50ID0gYENvbmdyYXR1bGF0aW9ucyBQbGF5ZXIgVHdvIWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2lubmVyLnRleHRDb250ZW50ID0gYENvbmdyYXR1bGF0aW9ucyBQbGF5ZXIgT25lIWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgY29tcE1vZGUgPSAocGxheWVyKSA9PiB7XG4gIHBsYXllci5ib2FyZC5wb3B1bGF0ZUJkKCk7XG4gIHJlbmRlckJvYXJkKHBsYXllcik7XG4gIGhpZGVCb2FyZChwbGF5ZXIpO1xufTtcblxuY29uc3QgYXV0b0F0ayA9IChwbGF5T25lLCBwbGF5VHdvKSA9PiB7XG4gIGNvbnN0IGJvYXJkID0gcGxheU9uZS5ib2FyZDtcbiAgY29uc3QgYm9hcmRMaXN0ID0gYm9hcmQuZ2V0Qm9hcmQoKTtcbiAgY29uc3QgbWlzc2VzID0gYm9hcmQuZ2V0TWlzc2VzKCk7XG4gIGNvbnN0IGhpdHMgPSBib2FyZC5nZXRIaXRzKCk7XG4gIGNvbnN0IHBsYXlXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYXktd2luZG93XCIpO1xuICBjb25zdCB3aW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbm5lclwiKTtcbiAgY29uc3QgZW5kTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbmQtZ2FtZVwiKTtcbiAgbGV0IHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gIGxldCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICBsZXQgY29udCA9IHRydWU7XG5cbiAgd2hpbGUgKGNvbnQgPT09IHRydWUpIHtcbiAgICBpZiAoXG4gICAgICBtaXNzZXMuZmluZCgoaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gaXRlbVswXSA9PT0geCAmJiBpdGVtWzFdID09PSB5O1xuICAgICAgfSkgfHxcbiAgICAgIGhpdHMuZmluZCgoaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gaXRlbVswXSA9PT0geCAmJiBpdGVtWzFdID09PSB5O1xuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgYm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcblxuICAgIGlmIChib2FyZExpc3RbeF1beV0gPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGlkID0gYHBsYXllci0ke3BsYXlUd28ubnVtYmVyfWA7XG4gICAgICBwbGF5V2luZG93LnNldEF0dHJpYnV0ZShcImRhdGEtaWRcIiwgYHBsYXllci0ke3BsYXlPbmUubnVtYmVyfWApO1xuICAgICAgcmVuZGVyQm9hcmQocGxheU9uZSk7XG4gICAgICByZW5kZXJQbGF5QmQocGxheU9uZSwgcGxheVR3bywgaWQpO1xuICAgICAgY29udCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocGxheU9uZS5ib2FyZC5pc0FsbFN1bmsoKSkge1xuICAgICAgICBjb250ID0gZmFsc2U7XG4gICAgICAgIGVuZE1zZy5zaG93TW9kYWwoKTtcbiAgICAgICAgd2lubmVyLnRleHRDb250ZW50ID0gXCJDb21wdXRlciB3b24hXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgICB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuY29uc3QgaW5pdFJhbmRCdG4gPSAocE9uZSwgcFR3bykgPT4ge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XG4gIGNvbnN0IHJhbmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3JhbmRvbVwiKTtcblxuICByYW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGlkID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcblxuICAgIGlmIChpZCA9PT0gXCJwbGF5ZXJPbmUtZm9ybVwiKSB7XG4gICAgICBwT25lLmJvYXJkLnBvcHVsYXRlQmQoKTtcbiAgICAgIHJlbmRlckJvYXJkKHBPbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwVHdvLmJvYXJkLnBvcHVsYXRlQmQoKTtcbiAgICAgIHJlbmRlckJvYXJkKHBUd28pO1xuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICByZW5kZXJCb2FyZCxcbiAgaW5pdFBsYWNlU2hpcCxcbiAgaW5pdEZpblNldHVwLFxuICBpbml0cGxheUJ0bixcbiAgY29tcE1vZGUsXG4gIGluaXRSYW5kQnRuLFxufTtcbiIsImltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL3BsYXllclwiO1xuaW1wb3J0IHtcbiAgcmVuZGVyQm9hcmQsXG4gIGluaXRQbGFjZVNoaXAsXG4gIGluaXRGaW5TZXR1cCxcbiAgaW5pdHBsYXlCdG4sXG4gIGNvbXBNb2RlLFxuICBpbml0UmFuZEJ0bixcbn0gZnJvbSBcIi4vRE9NXCI7XG5cbmNvbnN0IHNhbXBsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2hpcHNcIik7XG5cbnNhbXBsZS5hZGRFdmVudExpc3RlbmVyKFwib25jaGFuZ2VcIiwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhzYW1wbGUudmFsdWUpO1xufSk7XG5cbmNvbnN0IGdhbWVNb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYW1lX21vZGVcIik7XG5jb25zdCBwdnBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3B2cFwiKTtcbmNvbnN0IHB2Y0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHZjXCIpO1xuY29uc3QgcmVzdGFydEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVzdGFydFwiKTtcbmNvbnN0IGVuZE1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZW5kLWdhbWVcIik7XG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XG5sZXQgcGxheWVyT25lID0gUGxheWVyKFwiT25lXCIpO1xubGV0IHBsYXllclR3byA9IFBsYXllcihcIlR3b1wiKTtcblxuaW5pdFBsYWNlU2hpcChwbGF5ZXJPbmUsIHBsYXllclR3byk7XG5pbml0RmluU2V0dXAocGxheWVyT25lLCBwbGF5ZXJUd28pO1xuaW5pdHBsYXlCdG4ocGxheWVyT25lLCBwbGF5ZXJUd28pO1xuaW5pdFJhbmRCdG4ocGxheWVyT25lLCBwbGF5ZXJUd28pO1xucmVuZGVyQm9hcmQocGxheWVyT25lKTtcbnJlbmRlckJvYXJkKHBsYXllclR3byk7XG5cbnB2cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICByZXR1cm4gZ2FtZU1vZGUuY2xvc2UoKTtcbn0pO1xuXG5wdmNCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluXCIpO1xuXG4gIGNvbXBNb2RlKHBsYXllclR3byk7XG5cbiAgbWFpbi5jbGFzc0xpc3QuYWRkKFwicHZjXCIpO1xuXG4gIHJldHVybiBnYW1lTW9kZS5jbG9zZSgpO1xufSk7XG5cbnJlc3RhcnRCdG4uZm9yRWFjaCgoYnV0dG9uKSA9PlxuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpblwiKTtcbiAgICBjb25zdCB3aW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYXktd2luZG93XCIpO1xuICAgIGNvbnN0IHggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3gtY29vclwiKTtcbiAgICBjb25zdCB5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN5LWNvb3JcIik7XG4gICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNiYXR0bGVzaGlwXCIpO1xuXG4gICAgZW5kTXNnLmNsb3NlKCk7XG5cbiAgICBmb3JtLnNldEF0dHJpYnV0ZShcImlkXCIsIFwicGxheWVyT25lLWZvcm1cIik7XG4gICAgZm9ybS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICBtYWluLmNsYXNzTGlzdC5yZW1vdmUoXCJwdmNcIik7XG4gICAgd2luZG93LnNldEF0dHJpYnV0ZShcImRhdGEtaWRcIiwgXCJwbGF5ZXItVHdvXCIpO1xuXG4gICAgeC52YWx1ZSA9IFwiXCI7XG4gICAgeS52YWx1ZSA9IFwiXCI7XG4gICAgb3B0LnJlbW92ZUF0dHJpYnV0ZShcInNlbGVjdGVkXCIpO1xuICAgIG9wdC5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLCBcIlwiKTtcblxuICAgIHBsYXllck9uZS5ib2FyZC5yZXNldEJvYXJkKCk7XG4gICAgcGxheWVyVHdvLmJvYXJkLnJlc2V0Qm9hcmQoKTtcblxuICAgIHJlbmRlckJvYXJkKHBsYXllck9uZSk7XG4gICAgcmVuZGVyQm9hcmQocGxheWVyVHdvKTtcbiAgICBnYW1lTW9kZS5zaG93TW9kYWwoKTtcbiAgfSlcbik7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxvYWRcIiwgZ2FtZU1vZGUuc2hvd01vZGFsKCkpO1xuIl0sIm5hbWVzIjpbIlNoaXAiLCJuIiwic2hpcE9iaiIsImdldFNoaXAiLCJoaXQiLCJoaXRDb3VudCIsImxlbmd0aCIsInN1bmsiLCJpc1N1bmsiLCJyZXNldFNoaXAiLCJvcmllbnRhdGlvbiIsImNvbXAiLCJoaXRDb29yIiwiR2FtZWJvYXJkIiwiYm9hcmQiLCJtaXNzZXMiLCJoaXRzIiwiYWxsU2hpcHMiLCJiYXR0bGVzaGlwIiwiY3J1aXNlcl9JIiwiY3J1aXNlcl9JSSIsImRlc3Ryb3llcl9JIiwiZGVzdHJveWVyX0lJIiwiZGVzdHJveWVyX0lJSSIsInN1Ym1hcmluZV9JIiwic3VibWFyaW5lX0lJIiwic3VibWFyaW5lX0lJSSIsInN1Ym1hcmluZV9JViIsImlzRml0IiwiYXJyIiwic3RhdHVzIiwiZm9yRWFjaCIsIml0ZW0iLCJ4IiwieSIsImNyZWF0ZUNvbXAiLCJzaGlwIiwidGVtcCIsImEiLCJiIiwicHVzaCIsInBsYWNlU2hpcCIsImFsZXJ0IiwiY3JlYXRlQm9hcmQiLCJpIiwiaiIsImdldEJvYXJkIiwiZ2V0U2hpcHMiLCJyZWNlaXZlQXR0YWNrIiwiZ2V0TWlzc2VzIiwiZ2V0SGl0cyIsImlzQWxsU3VuayIsInNoaXBzIiwiT2JqZWN0IiwidmFsdWVzIiwicG9wdWxhdGVCZCIsImtleXMiLCJkaXJlY3Rpb25zIiwia2V5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwieiIsImZpdCIsInJlc2V0Qm9hcmQiLCJQbGF5ZXIiLCJudW1iZXIiLCJ3aW4iLCJpc0NvbXAiLCJmaWxsU3FyIiwicGxheWVyIiwic3FyIiwidGFnIiwiZmluZCIsInNldEF0dHJpYnV0ZSIsInJlbmRlckJvYXJkIiwic2hpcHNPYmoiLCJ4Q29vciIsInlDb29yIiwicmVuZGVyU2hpcCIsInBsYXllck51bSIsImN1cnJlbnRCb2FyZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJsYXN0RWxlbWVudENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJzcXVhcmUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJoaWRlQm9hcmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVuZGVyUGxheUJkIiwicE9uZSIsInBUd28iLCJpZCIsImN1cnJCb2FyZCIsInF1ZXJ5U2VsZWN0b3IiLCJpbml0U3FyQnRuIiwiZGlhbG9nIiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJ3aW5uZXIiLCJlbmRNc2ciLCJ3aW5kb3ciLCJwbGF5ZXJOYW1lIiwibWFpbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJzcXVhcmVJZCIsIm1vZGUiLCJib2FyZExpc3QiLCJ0ZXh0Q29udGVudCIsInNob3dNb2RhbCIsInNhbXBsZSIsImNvbnNvbGUiLCJsb2ciLCJ2YWx1ZSIsImdhbWVNb2RlIiwicHZwQnRuIiwicHZjQnRuIiwicmVzdGFydEJ0biIsInBsYXllck9uZSIsInBsYXllclR3byIsInNoaXBOYW1lIiwib3JpZW50IiwiTnVtYmVyIiwiaXNOYU4iLCJidXR0b24iLCJmb3JtIiwiaXNBbGxQbGFjZWQiLCJvcHQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbml0RmluU2V0dXAiLCJQT25lIiwiUFR3byIsInBsYXlXaW5kb3ciLCJjbG9zZSIsInBsYXlPbmUiLCJwbGF5VHdvIiwiY29udCIsImF1dG9BdGsiLCJpbml0cGxheUJ0biIsImluaXRSYW5kQnRuIiwicmVtb3ZlIl0sInNvdXJjZVJvb3QiOiIifQ==