(()=>{"use strict";const e=(e,t)=>{let r={};return r.name=t,r.length=e,r.hitCount=0,r.sunk=!1,r.orientation="horizontal",r.comp=[],r.hitCoor=[],{getShip:()=>r,hit:()=>{r.hitCount+=1,r.hitCount===r.length&&(r.sunk=!0)},isSunk:()=>!0===r.sunk,resetShip:()=>(r.name=t,r.length=e,r.hitCount=0,r.sunk=!1,r.orientation="horizontal",r.comp=[],r.hitCoor=[],r)}},t=()=>{let t=[],r=[],o=[],a={battleship:e(4,"battleship"),cruiser_I:e(3,"cruiser_I"),cruiser_II:e(3,"cruiser_II"),destroyer_I:e(2,"destroyer_I"),destroyer_II:e(2,"destroyer_II"),destroyer_III:e(2,"destroyer_III"),submarine_I:e(1,"submarine_I"),submarine_II:e(1,"submarine_II"),submarine_III:e(1,"submarine_III"),submarine_IV:e(1,"submarine_IV")};const n=e=>{let r=!0;return e.forEach((e=>{if(e[0]>9||e[1]>9||(o=e[0],a=e[1],null!==t[o][a]))return r=!1;var o,a})),r},l=(e,t,r)=>{const o=r.getShip().length;let a=[],n=e,l=t;if("horizontal"===r.getShip().orientation)for(;l!==t+o;)a.push([e,l]),l+=1;else for(;n!==e+o;)a.push([n,t]),n+=1;return a},u=(e,r,o)=>{let a=[],u=!0;return r+length-1>9||e>9||e+length-1>9||r>9?alert("Ship is out of bound"):(a=l(e,r,o),u=n(a),!1===u?(u=!0,a=[],alert("square is already occupied")):(o.getShip().comp=a,o.getShip().comp.forEach((e=>{t[e[0]][e[1]]=o})),t))};return{createBoard:()=>{for(let e=0;e<10;e++){t[e]=[];for(let r=0;r<10;r++)t[e][r]=null}return t},placeShip:u,getBoard:()=>t,getShips:()=>a,receiveAttack:(e,a)=>(null===t[e][a]?r.push([e,a]):(o.push([e,a]),t[e][a].hit(),t[e][a].getShip().hitCoor.push([e,a])),t),getMisses:()=>r,getHits:()=>o,isAllSunk:()=>{const e=Object.values(a);let t=!0;return e.forEach((e=>{if(!e.isSunk())return t=!1})),t},populateBd:()=>{const e=Object.keys(a),r=["horizontal","vertical"];return e.forEach((e=>{const t=a[e],o=t.getShip().length;let c=Math.floor(10*Math.random()),s=Math.floor(10*Math.random()),i=Math.floor(2*Math.random());t.getShip().orientation=r[i];let d=l(c,s,t),m=n(d);for(;s+o-1>9||c+o-1>9||!1===m;)c=Math.floor(10*Math.random()),s=Math.floor(10*Math.random()),i=Math.floor(2*Math.random()),t.getShip().orientation=r[i],d=l(c,s,t),m=n(d);u(c,s,t)})),t},resetBoard:()=>{const e=Object.keys(a);t=[],r=[],o=[],e.forEach((e=>{a[e].resetShip()}))}}},r=e=>({number:e,win:!1,board:t(),isComp:!1}),o=(e,t,r,o,a)=>{const n=e.board.getMisses();null===t?n.find((e=>e[0]===o&&e[1]===a))?r.setAttribute("style","background-color: #FCCD2A;"):r.setAttribute("style","background-color: #6A9AB0;"):t.getShip().hitCoor.find((e=>e[0]===o&&e[1]===a))?r.setAttribute("style","background-color: #D91656;"):r.setAttribute("style","background-color: #FCFAEE;")},a=e=>{e.board.createBoard(),(e=>{e.board.getBoard();const t=e.board.getShips();Object.keys(t).forEach((r=>{const o=t[r].getShip().comp;if(0!==o.length){const a=o[0][0],n=o[0][1];e.board.placeShip(a,n,t[r])}}))})(e);const t=e.board.getBoard(),r=e.number;let a=document.getElementById(`board${r}`);for(;a.lastElementChild;)a.removeChild(a.lastElementChild);for(let n=0;n<t.length;n++)for(let l=0;l<t.length;l++){const u=document.createElement("div");u.classList.add(`${r}-square`),u.setAttribute("data-x",`${n}`),u.setAttribute("data-y",`${l}`),o(e,t[n][l],u,n,l),a.appendChild(u)}return a},n=e=>{document.querySelectorAll(`.${e.number}-square`).forEach((e=>{e.setAttribute("disabled",""),e.setAttribute("style","background-color: gray;")}))},l=(e,t,r)=>{let o,a,n;for("player-Two"===r?(o=t.board.getBoard(),a=t.board.getMisses(),n=document.querySelector(`#board${t.number}`)):(o=e.board.getBoard(),a=e.board.getMisses(),n=document.querySelector(`#board${e.number}`));n.lastElementChild;)n.removeChild(n.lastElementChild);for(let l=0;l<o.length;l++)for(let c=0;c<o.length;c++){const s=o[l][c],i=document.createElement("button");"player-One"===r?i.classList.add(`${e.number}-square`):i.classList.add(`${t.number}-square`),i.setAttribute("data-x",`${l}`),i.setAttribute("data-y",`${c}`),u(e,t,i),null!==s&&s.getShip().hitCount>0&&s.getShip().hitCoor.find((e=>e[0]===l&&e[1]===c))&&(i.setAttribute("style","background-color: #D91656;"),i.setAttribute("disabled","")),a.find((e=>e[0]===l&&e[1]===c))&&(i.setAttribute("style","background-color: #15B392;"),i.setAttribute("disabled","")),n.appendChild(i)}},u=(e,t,r)=>{const o=document.querySelector(".dialog"),a=parseInt(r.getAttribute("data-x")),l=parseInt(r.getAttribute("data-y")),u=document.querySelector(".winner"),c=document.querySelector(".end-game"),i=document.querySelector("#play-window"),d=document.querySelector(".player-name"),m=document.querySelector("main");r.addEventListener("click",(h=>{h.preventDefault();const p=r.getAttribute("class"),y=i.getAttribute("data-id"),b=m.getAttribute("class");let S,g;S="One-square"===p?e.board:t.board,g=S.getBoard(),S.receiveAttack(a,l),null===g[a][l]?(n("One-square"===p?t:e),r.setAttribute("style","background-color: #FCCD2A;"),d.textContent="pvc"===b?"Computer`s turn!":"player-One"===y?"Player Two`s turn!":"Player One`s turn!",o.showModal()):(s(g[a][l],"One-square"===p?e.number:t.number),r.setAttribute("style","background-color: #D91656;"),S.isAllSunk()&&(r.setAttribute("style","background-color: #D91656;"),c.showModal(),u.textContent="player-Two"===y?"Congratulations Player Two!":"Congratulations Player One!"))}))},c=e=>{const t=e.board.getShips()[document.querySelector("#ships").value].getShip().length,r=document.querySelector(".shape");for(;r.lastElementChild;)r.removeChild(r.lastElementChild);for(let e=1;e<=t;e++){const e=document.createElement("div");e.classList.add("square"),r.appendChild(e)}},s=(e,t)=>{const r=e.getShip().name,o=document.querySelector(`.shiplist-${t}`).querySelector(`.${r}`).querySelectorAll(".square");e.isSunk()&&o.forEach((e=>{e.setAttribute("style","background-color: #D91656;")}))},i=document.querySelector(".game_mode"),d=document.querySelector("#pvp"),m=document.querySelector("#pvc"),h=document.querySelectorAll(".restart"),p=document.querySelector(".end-game"),y=document.querySelector("form"),b=document.querySelector("#ships"),S=document.querySelector("#orientation");let g=r("One"),f=r("Two");var q,v;q=g,v=f,document.querySelector("#placeShipBtn").addEventListener("click",(e=>{e.preventDefault();let t=document.querySelector("form").getAttribute("id");const r=parseInt(document.querySelector("#y-coor").value),o=parseInt(document.querySelector("#x-coor").value),n=document.querySelector("#ships").value,l=document.querySelector("#orientation").value;let u;u="playerOne-form"===t?q.board.getShips()[n]:v.board.getShips()[n],u.getShip().orientation=l,Number.isNaN(r)||Number.isNaN(o)||("playerOne-form"===t?(q.board.placeShip(r,o,u),a(q)):(v.board.placeShip(r,o,u),a(v)))})),((e,t)=>{const r=document.querySelector("main"),o=document.querySelector("#finBtn"),a=document.querySelector("form"),l=document.querySelector(".player-name");let u=!1;o.addEventListener("click",(o=>{let s;o.preventDefault();const i=r.getAttribute("class");let d=a.getAttribute("id");if(s="playerOne-form"===d?e.board.getShips():t.board.getShips(),Object.values(s).forEach((e=>{const t=e.getShip().comp;return u=0!==t.length})),u){const r=document.querySelector(".shape"),o=document.querySelector("#ships"),u=document.querySelector("#x-coor"),s=document.querySelector("#y-coor"),m=o.querySelector(".battleship"),h=document.querySelector(".message"),p=document.querySelector("span");if(u.value="",s.value="",r.classList.remove("vertical"),m.removeAttribute("selected"),m.setAttribute("selected",""),c(t),"playerOne-form"===d&&(p.textContent="Player Two",a.setAttribute("id","playerTwo-form"),n(e)),"pvc"===i||"playerTwo-form"===d){a.setAttribute("style","display: none;"),h.setAttribute("style","display: none;"),n(t);const e=document.querySelector(".dialog");l.textContent="Player One`s turn!",e.showModal()}}else alert("Please place all the ships first")}))})(g,f),((e,t)=>{const r=document.querySelector("main"),o=document.querySelector(".dialog"),n=document.querySelector("#play-window");document.querySelector("#play").addEventListener("click",(u=>{u.preventDefault();let c=n.getAttribute("data-id");if("player-Two"===c)return a(e),l(e,t,c),n.setAttribute("data-id",`player-${e.number}`),o.close();if("player-One"===c){const u=r.getAttribute("class");return n.setAttribute("data-id",`player-${t.number}`),"pvc"===u?(((e,t)=>{const r=e.board,o=r.getBoard(),n=r.getMisses(),u=r.getHits(),c=document.querySelector("#play-window"),i=document.querySelector(".winner"),d=document.querySelector(".end-game");let m=Math.floor(10*Math.random()),h=Math.floor(10*Math.random()),p=!0;for(;!0===p;)if(n.find((e=>e[0]===m&&e[1]===h))||u.find((e=>e[0]===m&&e[1]===h)))m=Math.floor(10*Math.random()),h=Math.floor(10*Math.random());else if(r.receiveAttack(m,h),null===o[m][h]){const r=`player-${t.number}`;c.setAttribute("data-id",`player-${e.number}`),a(e),l(e,t,r),p=!1}else s(e.board.getBoard()[m][h],e.number),e.board.isAllSunk()?(p=!1,d.showModal(),i.textContent="Computer won!"):(m=Math.floor(10*Math.random()),h=Math.floor(10*Math.random()))})(e,t),o.close()):(a(t),l(e,t,c),o.close())}}))})(g,f),((e,t)=>{const r=document.querySelector("form");document.querySelector("#random").addEventListener("click",(o=>{o.preventDefault(),"playerOne-form"===r.getAttribute("id")?(e.board.populateBd(),a(e)):(t.board.populateBd(),a(t))}))})(g,f),a(g),a(f),c(g),d.addEventListener("click",(e=>(e.preventDefault(),i.close()))),m.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("main");var r;return(r=f).board.populateBd(),a(r),n(r),t.classList.add("pvc"),i.close()})),h.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("main"),r=document.querySelector("#play-window"),o=document.querySelector("#x-coor"),n=document.querySelector("#y-coor"),l=b.querySelector(".battleship"),u=document.querySelectorAll(".square"),s=document.querySelector(".shape"),d=document.querySelector(".message"),m=document.querySelector("span");p.close(),y.setAttribute("id","playerOne-form"),y.removeAttribute("style"),t.classList.remove("pvc"),s.classList.remove("vertical"),r.setAttribute("data-id","player-Two"),u.forEach((e=>{e.removeAttribute("style")})),o.value="",n.value="",l.removeAttribute("selected"),l.setAttribute("selected",""),m.textContent="Player One",d.removeAttribute("style"),c(g),g.board.resetBoard(),f.board.resetBoard(),a(g),a(f),i.showModal()})))),b.addEventListener("change",(()=>{c(g)})),S.addEventListener("change",(()=>{const e=document.querySelector(".shape");"vertical"===S.value?e.classList.add("vertical"):e.classList.remove("vertical")})),document.addEventListener("onload",i.showModal())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q00sRUFBT3dDLFFBRVAsRUFBS3RFLGFBQWEsS0FBTSxrQkFDeEIsRUFBS2lFLGdCQUFnQixTQUNyQmhDLEVBQUtuQixVQUFVa0QsT0FBTyxPQUN0Qm5CLEVBQVUvQixVQUFVa0QsT0FBTyxZQUMzQmpDLEVBQU8vQixhQUFhLFVBQVcsY0FFL0I4QyxFQUFRekYsU0FBU3VELElBQ2ZBLEVBQU9xRCxnQkFBZ0IsUUFBUSxJQUdqQzFHLEVBQUVxRixNQUFRLEdBQ1ZwRixFQUFFb0YsTUFBUSxHQUNWaUIsRUFBSUksZ0JBQWdCLFlBQ3BCSixFQUFJN0QsYUFBYSxXQUFZLElBRTdCK0QsRUFBS3ZCLFlBQWMsYUFDbkJzQixFQUFRRyxnQkFBZ0IsU0FFeEJ0QixFQUFZUyxHQUNaQSxFQUFVaEgsTUFBTWtELGFBQ2hCK0QsRUFBVWpILE1BQU1rRCxhQUVoQlcsRUFBWW1ELEdBQ1puRCxFQUFZb0QsR0FDWk4sRUFBU04sV0FBVyxNQUl4QixFQUFPUCxpQkFBaUIsVUFBVSxLQUNoQ1MsRUFBWVMsRUFBVSxJQUd4QkQsRUFBU2pCLGlCQUFpQixVQUFVLEtBQ2xDLE1BQU1XLEVBQVlyQyxTQUFTZ0IsY0FBYyxVQUVsQixhQUFuQjJCLEVBQVNQLE1BQ1hDLEVBQVUvQixVQUFVQyxJQUFJLFlBRXhCOEIsRUFBVS9CLFVBQVVrRCxPQUFPLFdBQzdCLElBR0Z4RCxTQUFTMEIsaUJBQWlCLFNBQVVhLEVBQVNOLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9zcmMvRE9NLmpzIiwid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNoaXAgPSAobiwgbmFtZSkgPT4ge1xuICBsZXQgc2hpcE9iaiA9IHt9O1xuXG4gIHNoaXBPYmpbXCJuYW1lXCJdID0gbmFtZTtcbiAgc2hpcE9ialtcImxlbmd0aFwiXSA9IG47XG4gIHNoaXBPYmpbXCJoaXRDb3VudFwiXSA9IDA7XG4gIHNoaXBPYmpbXCJzdW5rXCJdID0gZmFsc2U7XG4gIHNoaXBPYmpbXCJvcmllbnRhdGlvblwiXSA9IFwiaG9yaXpvbnRhbFwiO1xuICBzaGlwT2JqW1wiY29tcFwiXSA9IFtdO1xuICBzaGlwT2JqW1wiaGl0Q29vclwiXSA9IFtdO1xuXG4gIGNvbnN0IGdldFNoaXAgPSAoKSA9PiBzaGlwT2JqO1xuXG4gIGNvbnN0IGhpdCA9ICgpID0+IHtcbiAgICBzaGlwT2JqLmhpdENvdW50ICs9IDE7XG4gICAgaWYgKHNoaXBPYmouaGl0Q291bnQgPT09IHNoaXBPYmoubGVuZ3RoKSBzaGlwT2JqLnN1bmsgPSB0cnVlO1xuICB9O1xuXG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IHtcbiAgICByZXR1cm4gc2hpcE9iai5zdW5rID09PSB0cnVlID8gdHJ1ZSA6IGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IHJlc2V0U2hpcCA9ICgpID0+IHtcbiAgICBzaGlwT2JqLm5hbWUgPSBuYW1lO1xuICAgIHNoaXBPYmoubGVuZ3RoID0gbjtcbiAgICBzaGlwT2JqLmhpdENvdW50ID0gMDtcbiAgICBzaGlwT2JqLnN1bmsgPSBmYWxzZTtcbiAgICBzaGlwT2JqLm9yaWVudGF0aW9uID0gXCJob3Jpem9udGFsXCI7XG4gICAgc2hpcE9iai5jb21wID0gW107XG4gICAgc2hpcE9iai5oaXRDb29yID0gW107XG5cbiAgICByZXR1cm4gc2hpcE9iajtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFNoaXAsXG4gICAgaGl0LFxuICAgIGlzU3VuayxcbiAgICByZXNldFNoaXAsXG4gIH07XG59O1xuXG5leHBvcnQgeyBTaGlwIH07XG4iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuXG5jb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG4gIGxldCBib2FyZCA9IFtdO1xuICBsZXQgbWlzc2VzID0gW107XG4gIGxldCBoaXRzID0gW107XG5cbiAgbGV0IGFsbFNoaXBzID0ge1xuICAgIGJhdHRsZXNoaXA6IFNoaXAoNCwgXCJiYXR0bGVzaGlwXCIpLFxuICAgIGNydWlzZXJfSTogU2hpcCgzLCBcImNydWlzZXJfSVwiKSxcbiAgICBjcnVpc2VyX0lJOiBTaGlwKDMsIFwiY3J1aXNlcl9JSVwiKSxcbiAgICBkZXN0cm95ZXJfSTogU2hpcCgyLCBcImRlc3Ryb3llcl9JXCIpLFxuICAgIGRlc3Ryb3llcl9JSTogU2hpcCgyLCBcImRlc3Ryb3llcl9JSVwiKSxcbiAgICBkZXN0cm95ZXJfSUlJOiBTaGlwKDIsIFwiZGVzdHJveWVyX0lJSVwiKSxcbiAgICBzdWJtYXJpbmVfSTogU2hpcCgxLCBcInN1Ym1hcmluZV9JXCIpLFxuICAgIHN1Ym1hcmluZV9JSTogU2hpcCgxLCBcInN1Ym1hcmluZV9JSVwiKSxcbiAgICBzdWJtYXJpbmVfSUlJOiBTaGlwKDEsIFwic3VibWFyaW5lX0lJSVwiKSxcbiAgICBzdWJtYXJpbmVfSVY6IFNoaXAoMSwgXCJzdWJtYXJpbmVfSVZcIiksXG4gIH07XG5cbiAgY29uc3QgZ2V0Qm9hcmQgPSAoKSA9PiBib2FyZDtcbiAgY29uc3QgZ2V0TWlzc2VzID0gKCkgPT4gbWlzc2VzO1xuICBjb25zdCBnZXRTaGlwcyA9ICgpID0+IGFsbFNoaXBzO1xuICBjb25zdCBnZXRIaXRzID0gKCkgPT4gaGl0cztcblxuICBjb25zdCBjcmVhdGVCb2FyZCA9ICgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGJvYXJkW2ldID0gW107XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgYm9hcmRbaV1bal0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBib2FyZDtcbiAgfTtcblxuICBjb25zdCBpc0VtcHR5ID0gKHgsIHkpID0+IHtcbiAgICByZXR1cm4gYm9hcmRbeF1beV0gPT09IG51bGwgPyB0cnVlIDogZmFsc2U7XG4gIH07XG5cbiAgY29uc3QgaXNGaXQgPSAoYXJyKSA9PiB7XG4gICAgbGV0IHN0YXR1cyA9IHRydWU7XG5cbiAgICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgaWYgKGl0ZW1bMF0gPiA5IHx8IGl0ZW1bMV0gPiA5IHx8ICFpc0VtcHR5KGl0ZW1bMF0sIGl0ZW1bMV0pKVxuICAgICAgICByZXR1cm4gKHN0YXR1cyA9IGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzdGF0dXM7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlQ29tcCA9ICh4LCB5LCBzaGlwKSA9PiB7XG4gICAgY29uc3QgbGVuZ3RoID0gc2hpcC5nZXRTaGlwKCkubGVuZ3RoO1xuICAgIGNvbnN0IG9yaWVudGF0aW9uID0gc2hpcC5nZXRTaGlwKCkub3JpZW50YXRpb247XG4gICAgbGV0IHRlbXAgPSBbXTtcbiAgICBsZXQgYSA9IHg7XG4gICAgbGV0IGIgPSB5O1xuXG4gICAgaWYgKG9yaWVudGF0aW9uID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgd2hpbGUgKGIgIT09IHkgKyBsZW5ndGgpIHtcbiAgICAgICAgdGVtcC5wdXNoKFt4LCBiXSk7XG4gICAgICAgIGIgKz0gMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd2hpbGUgKGEgIT09IHggKyBsZW5ndGgpIHtcbiAgICAgICAgdGVtcC5wdXNoKFthLCB5XSk7XG4gICAgICAgIGEgKz0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGVtcDtcbiAgfTtcblxuICBjb25zdCBwbGFjZVNoaXAgPSAoeCwgeSwgc2hpcCkgPT4ge1xuICAgIGxldCB0ZW1wID0gW107XG4gICAgbGV0IHN0YXR1cyA9IHRydWU7XG5cbiAgICBpZiAoeSArIGxlbmd0aCAtIDEgPiA5IHx8IHggPiA5IHx8IHggKyBsZW5ndGggLSAxID4gOSB8fCB5ID4gOSkge1xuICAgICAgcmV0dXJuIGFsZXJ0KFwiU2hpcCBpcyBvdXQgb2YgYm91bmRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRlbXAgPSBjcmVhdGVDb21wKHgsIHksIHNoaXApO1xuICAgICAgc3RhdHVzID0gaXNGaXQodGVtcCk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gZmFsc2UpIHtcbiAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICB0ZW1wID0gW107XG4gICAgICByZXR1cm4gYWxlcnQoXCJzcXVhcmUgaXMgYWxyZWFkeSBvY2N1cGllZFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hpcC5nZXRTaGlwKCkuY29tcCA9IHRlbXA7XG5cbiAgICAgIHNoaXAuZ2V0U2hpcCgpLmNvbXAuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBib2FyZFtpdGVtWzBdXVtpdGVtWzFdXSA9IHNoaXA7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm9hcmQ7XG4gIH07XG5cbiAgY29uc3QgcG9wdWxhdGVCZCA9ICgpID0+IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYWxsU2hpcHMpO1xuICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXCJob3Jpem9udGFsXCIsIFwidmVydGljYWxcIl07XG5cbiAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3Qgc2hpcCA9IGFsbFNoaXBzW2tleV07XG4gICAgICBjb25zdCBsZW5ndGggPSBzaGlwLmdldFNoaXAoKS5sZW5ndGg7XG5cbiAgICAgIGxldCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgbGV0IHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICBsZXQgeiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpO1xuXG4gICAgICBzaGlwLmdldFNoaXAoKS5vcmllbnRhdGlvbiA9IGRpcmVjdGlvbnNbel07XG4gICAgICBsZXQgdGVtcCA9IGNyZWF0ZUNvbXAoeCwgeSwgc2hpcCk7XG4gICAgICBsZXQgZml0ID0gaXNGaXQodGVtcCk7XG5cbiAgICAgIHdoaWxlICh5ICsgbGVuZ3RoIC0gMSA+IDkgfHwgeCArIGxlbmd0aCAtIDEgPiA5IHx8IGZpdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICAgICAgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICAgICAgeiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpO1xuXG4gICAgICAgIHNoaXAuZ2V0U2hpcCgpLm9yaWVudGF0aW9uID0gZGlyZWN0aW9uc1t6XTtcbiAgICAgICAgdGVtcCA9IGNyZWF0ZUNvbXAoeCwgeSwgc2hpcCk7XG4gICAgICAgIGZpdCA9IGlzRml0KHRlbXApO1xuICAgICAgfVxuXG4gICAgICBwbGFjZVNoaXAoeCwgeSwgc2hpcCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYm9hcmQ7XG4gIH07XG5cbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh4LCB5KSA9PiB7XG4gICAgaWYgKGJvYXJkW3hdW3ldID09PSBudWxsKSBtaXNzZXMucHVzaChbeCwgeV0pO1xuICAgIGVsc2Uge1xuICAgICAgaGl0cy5wdXNoKFt4LCB5XSk7XG4gICAgICBib2FyZFt4XVt5XS5oaXQoKTtcbiAgICAgIGJvYXJkW3hdW3ldLmdldFNoaXAoKS5oaXRDb29yLnB1c2goW3gsIHldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm9hcmQ7XG4gIH07XG5cbiAgY29uc3QgaXNBbGxTdW5rID0gKCkgPT4ge1xuICAgIGNvbnN0IHNoaXBzID0gT2JqZWN0LnZhbHVlcyhhbGxTaGlwcyk7XG4gICAgbGV0IHN0YXR1cyA9IHRydWU7XG5cbiAgICBzaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICBpZiAoIXNoaXAuaXNTdW5rKCkpIHtcbiAgICAgICAgcmV0dXJuIChzdGF0dXMgPSBmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3RhdHVzO1xuICB9O1xuXG4gIGNvbnN0IHJlc2V0Qm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGFsbFNoaXBzKTtcbiAgICBib2FyZCA9IFtdO1xuICAgIG1pc3NlcyA9IFtdO1xuICAgIGhpdHMgPSBbXTtcblxuICAgIGtleXMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgYWxsU2hpcHNbc2hpcF0ucmVzZXRTaGlwKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVCb2FyZCxcbiAgICBwbGFjZVNoaXAsXG4gICAgZ2V0Qm9hcmQsXG4gICAgZ2V0U2hpcHMsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBnZXRNaXNzZXMsXG4gICAgZ2V0SGl0cyxcbiAgICBpc0FsbFN1bmssXG4gICAgcG9wdWxhdGVCZCxcbiAgICByZXNldEJvYXJkLFxuICB9O1xufTtcblxuZXhwb3J0IHsgR2FtZWJvYXJkIH07XG4iLCJpbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcblxuY29uc3QgUGxheWVyID0gKG51bWJlcikgPT4ge1xuICBsZXQgd2luID0gZmFsc2U7XG4gIGxldCBib2FyZCA9IEdhbWVib2FyZCgpO1xuICBsZXQgaXNDb21wID0gZmFsc2U7XG5cbiAgcmV0dXJuIHtcbiAgICBudW1iZXIsXG4gICAgd2luLFxuICAgIGJvYXJkLFxuICAgIGlzQ29tcCxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IFBsYXllciB9O1xuIiwiY29uc3QgZmlsbFNxciA9IChwbGF5ZXIsIHNxciwgdGFnLCB4LCB5KSA9PiB7XG4gIGNvbnN0IG1pc3NlcyA9IHBsYXllci5ib2FyZC5nZXRNaXNzZXMoKTtcblxuICBpZiAoc3FyID09PSBudWxsKSB7XG4gICAgaWYgKFxuICAgICAgbWlzc2VzLmZpbmQoKGl0ZW0pID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW1bMF0gPT09IHggJiYgaXRlbVsxXSA9PT0geTtcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB0YWcuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiAjRkNDRDJBO1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFnLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogIzZBOUFCMDtcIik7XG4gICAgfVxuICB9IGVsc2UgaWYgKFxuICAgIHNxci5nZXRTaGlwKCkuaGl0Q29vci5maW5kKChpdGVtKSA9PiB7XG4gICAgICByZXR1cm4gaXRlbVswXSA9PT0geCAmJiBpdGVtWzFdID09PSB5O1xuICAgIH0pXG4gICkge1xuICAgIHRhZy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6ICNEOTE2NTY7XCIpO1xuICB9IGVsc2Uge1xuICAgIHRhZy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6ICNGQ0ZBRUU7XCIpO1xuICB9XG59O1xuXG5jb25zdCByZW5kZXJTaGlwID0gKHBsYXllcikgPT4ge1xuICBsZXQgYm9hcmQgPSBwbGF5ZXIuYm9hcmQuZ2V0Qm9hcmQoKTtcbiAgY29uc3Qgc2hpcHNPYmogPSBwbGF5ZXIuYm9hcmQuZ2V0U2hpcHMoKTtcbiAgY29uc3Qgc2hpcHNMaXN0ID0gT2JqZWN0LmtleXMoc2hpcHNPYmopO1xuXG4gIHNoaXBzTGlzdC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgY29uc3QgY29tcCA9IHNoaXBzT2JqW3NoaXBdLmdldFNoaXAoKS5jb21wO1xuXG4gICAgaWYgKGNvbXAubGVuZ3RoICE9PSAwKSB7XG4gICAgICBjb25zdCB4Q29vciA9IGNvbXBbMF1bMF07XG4gICAgICBjb25zdCB5Q29vciA9IGNvbXBbMF1bMV07XG4gICAgICBwbGF5ZXIuYm9hcmQucGxhY2VTaGlwKHhDb29yLCB5Q29vciwgc2hpcHNPYmpbc2hpcF0pO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGJvYXJkO1xufTtcblxuY29uc3QgcmVuZGVyQm9hcmQgPSAocGxheWVyKSA9PiB7XG4gIHBsYXllci5ib2FyZC5jcmVhdGVCb2FyZCgpO1xuXG4gIHJlbmRlclNoaXAocGxheWVyKTtcblxuICBjb25zdCBib2FyZCA9IHBsYXllci5ib2FyZC5nZXRCb2FyZCgpO1xuICBjb25zdCBwbGF5ZXJOdW0gPSBwbGF5ZXIubnVtYmVyO1xuICBsZXQgY3VycmVudEJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGJvYXJkJHtwbGF5ZXJOdW19YCk7XG5cbiAgd2hpbGUgKGN1cnJlbnRCb2FyZC5sYXN0RWxlbWVudENoaWxkKVxuICAgIGN1cnJlbnRCb2FyZC5yZW1vdmVDaGlsZChjdXJyZW50Qm9hcmQubGFzdEVsZW1lbnRDaGlsZCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZC5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9hcmQubGVuZ3RoOyBqKyspIHtcbiAgICAgIGNvbnN0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChgJHtwbGF5ZXJOdW19LXNxdWFyZWApO1xuXG4gICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiZGF0YS14XCIsIGAke2l9YCk7XG4gICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiZGF0YS15XCIsIGAke2p9YCk7XG5cbiAgICAgIGZpbGxTcXIocGxheWVyLCBib2FyZFtpXVtqXSwgc3F1YXJlLCBpLCBqKTtcblxuICAgICAgY3VycmVudEJvYXJkLmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGN1cnJlbnRCb2FyZDtcbn07XG5cbmNvbnN0IGluaXRQbGFjZVNoaXAgPSAocE9uZSwgcFR3bykgPT4ge1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjcGxhY2VTaGlwQnRuYCk7XG5cbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcbiAgICBsZXQgaWQgPSBmb3JtLmdldEF0dHJpYnV0ZShcImlkXCIpO1xuXG4gICAgY29uc3QgeENvb3IgPSBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjeS1jb29yYCkudmFsdWUpO1xuICAgIGNvbnN0IHlDb29yID0gcGFyc2VJbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3gtY29vcmApLnZhbHVlKTtcbiAgICBjb25zdCBzaGlwTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNzaGlwc2ApLnZhbHVlO1xuXG4gICAgY29uc3Qgb3JpZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI29yaWVudGF0aW9uYCkudmFsdWU7XG5cbiAgICBsZXQgc2hpcDtcbiAgICBpZCA9PT0gXCJwbGF5ZXJPbmUtZm9ybVwiXG4gICAgICA/IChzaGlwID0gcE9uZS5ib2FyZC5nZXRTaGlwcygpW3NoaXBOYW1lXSlcbiAgICAgIDogKHNoaXAgPSBwVHdvLmJvYXJkLmdldFNoaXBzKClbc2hpcE5hbWVdKTtcblxuICAgIHNoaXAuZ2V0U2hpcCgpLm9yaWVudGF0aW9uID0gb3JpZW50O1xuXG4gICAgaWYgKE51bWJlci5pc05hTih4Q29vcikgfHwgTnVtYmVyLmlzTmFOKHlDb29yKSkgcmV0dXJuO1xuICAgIGVsc2Uge1xuICAgICAgaWYgKGlkID09PSBcInBsYXllck9uZS1mb3JtXCIpIHtcbiAgICAgICAgcE9uZS5ib2FyZC5wbGFjZVNoaXAoeENvb3IsIHlDb29yLCBzaGlwKTtcbiAgICAgICAgcmVuZGVyQm9hcmQocE9uZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwVHdvLmJvYXJkLnBsYWNlU2hpcCh4Q29vciwgeUNvb3IsIHNoaXApO1xuICAgICAgICByZW5kZXJCb2FyZChwVHdvKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgaW5pdEZpblNldHVwID0gKHBPbmUsIHBUd28pID0+IHtcbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluXCIpO1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZmluQnRuYCk7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBmb3JtYCk7XG4gIGNvbnN0IHBsYXllck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci1uYW1lXCIpO1xuXG4gIGxldCBpc0FsbFBsYWNlZCA9IGZhbHNlO1xuXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgc2hpcHNPYmo7XG4gICAgY29uc3QgbW9kZSA9IG1haW4uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgbGV0IGlkID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcblxuICAgIGlkID09PSBcInBsYXllck9uZS1mb3JtXCJcbiAgICAgID8gKHNoaXBzT2JqID0gcE9uZS5ib2FyZC5nZXRTaGlwcygpKVxuICAgICAgOiAoc2hpcHNPYmogPSBwVHdvLmJvYXJkLmdldFNoaXBzKCkpO1xuXG4gICAgY29uc3Qgc2hpcHMgPSBPYmplY3QudmFsdWVzKHNoaXBzT2JqKTtcblxuICAgIHNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIGNvbnN0IGNvbXAgPSBzaGlwLmdldFNoaXAoKS5jb21wO1xuICAgICAgaWYgKGNvbXAubGVuZ3RoID09PSAwKSByZXR1cm4gKGlzQWxsUGxhY2VkID0gZmFsc2UpO1xuICAgICAgZWxzZSByZXR1cm4gKGlzQWxsUGxhY2VkID0gdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpZiAoaXNBbGxQbGFjZWQpIHtcbiAgICAgIGNvbnN0IHNoYXBlQ29udCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2hhcGVcIik7XG4gICAgICBjb25zdCBzaGlwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2hpcHNcIik7XG4gICAgICBjb25zdCB4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN4LWNvb3JcIik7XG4gICAgICBjb25zdCB5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN5LWNvb3JcIik7XG4gICAgICBjb25zdCBvcHQgPSBzaGlwcy5xdWVyeVNlbGVjdG9yKFwiLmJhdHRsZXNoaXBcIik7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZXNzYWdlXCIpO1xuICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpO1xuXG4gICAgICB4LnZhbHVlID0gXCJcIjtcbiAgICAgIHkudmFsdWUgPSBcIlwiO1xuICAgICAgc2hhcGVDb250LmNsYXNzTGlzdC5yZW1vdmUoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgIG9wdC5yZW1vdmVBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKTtcbiAgICAgIG9wdC5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLCBcIlwiKTtcbiAgICAgIHJlbmRlclNoYXBlKHBUd28pO1xuXG4gICAgICBpZiAoaWQgPT09IFwicGxheWVyT25lLWZvcm1cIikge1xuICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gXCJQbGF5ZXIgVHdvXCI7XG4gICAgICAgIGZvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwbGF5ZXJUd28tZm9ybVwiKTtcbiAgICAgICAgaGlkZUJvYXJkKHBPbmUpO1xuICAgICAgfVxuXG4gICAgICBpZiAobW9kZSA9PT0gXCJwdmNcIiB8fCBpZCA9PT0gXCJwbGF5ZXJUd28tZm9ybVwiKSB7XG4gICAgICAgIGZvcm0uc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBub25lO1wiKTtcbiAgICAgICAgbWVzc2FnZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6IG5vbmU7XCIpO1xuICAgICAgICBoaWRlQm9hcmQocFR3byk7XG4gICAgICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlhbG9nXCIpO1xuICAgICAgICBwbGF5ZXJOYW1lLnRleHRDb250ZW50ID0gXCJQbGF5ZXIgT25lYHMgdHVybiFcIjtcbiAgICAgICAgZGlhbG9nLnNob3dNb2RhbCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChcIlBsZWFzZSBwbGFjZSBhbGwgdGhlIHNoaXBzIGZpcnN0XCIpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5jb25zdCBoaWRlQm9hcmQgPSAocGxheWVyKSA9PiB7XG4gIGxldCBzcXVhcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7cGxheWVyLm51bWJlcn0tc3F1YXJlYCk7XG5cbiAgc3F1YXJlcy5mb3JFYWNoKChzcXVhcmUpID0+IHtcbiAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogZ3JheTtcIik7XG4gIH0pO1xufTtcblxuY29uc3QgaW5pdHBsYXlCdG4gPSAoUE9uZSwgUFR3bykgPT4ge1xuICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIik7XG4gIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlhbG9nXCIpO1xuICBjb25zdCBwbGF5V2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5LXdpbmRvd1wiKTtcbiAgY29uc3QgcGxheUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheVwiKTtcblxuICBwbGF5QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgcGxheWVyID0gcGxheVdpbmRvdy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpO1xuXG4gICAgaWYgKHBsYXllciA9PT0gXCJwbGF5ZXItVHdvXCIpIHtcbiAgICAgIHJlbmRlckJvYXJkKFBPbmUpO1xuICAgICAgcmVuZGVyUGxheUJkKFBPbmUsIFBUd28sIHBsYXllcik7XG4gICAgICBwbGF5V2luZG93LnNldEF0dHJpYnV0ZShcImRhdGEtaWRcIiwgYHBsYXllci0ke1BPbmUubnVtYmVyfWApO1xuICAgICAgcmV0dXJuIGRpYWxvZy5jbG9zZSgpO1xuICAgIH0gZWxzZSBpZiAocGxheWVyID09PSBcInBsYXllci1PbmVcIikge1xuICAgICAgY29uc3QgbW9kZSA9IG1haW4uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgICBwbGF5V2luZG93LnNldEF0dHJpYnV0ZShcImRhdGEtaWRcIiwgYHBsYXllci0ke1BUd28ubnVtYmVyfWApO1xuICAgICAgaWYgKG1vZGUgPT09IFwicHZjXCIpIHtcbiAgICAgICAgYXV0b0F0ayhQT25lLCBQVHdvKTtcbiAgICAgICAgcmV0dXJuIGRpYWxvZy5jbG9zZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVuZGVyQm9hcmQoUFR3byk7XG4gICAgICAgIHJlbmRlclBsYXlCZChQT25lLCBQVHdvLCBwbGF5ZXIpO1xuICAgICAgICByZXR1cm4gZGlhbG9nLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IHJlbmRlclBsYXlCZCA9IChwT25lLCBwVHdvLCBpZCkgPT4ge1xuICBsZXQgYm9hcmQ7XG4gIGxldCBtaXNzZXM7XG4gIGxldCBjdXJyQm9hcmQ7XG5cbiAgaWYgKGlkID09PSBcInBsYXllci1Ud29cIikge1xuICAgIGJvYXJkID0gcFR3by5ib2FyZC5nZXRCb2FyZCgpO1xuICAgIG1pc3NlcyA9IHBUd28uYm9hcmQuZ2V0TWlzc2VzKCk7XG4gICAgY3VyckJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2JvYXJkJHtwVHdvLm51bWJlcn1gKTtcbiAgfSBlbHNlIHtcbiAgICBib2FyZCA9IHBPbmUuYm9hcmQuZ2V0Qm9hcmQoKTtcbiAgICBtaXNzZXMgPSBwT25lLmJvYXJkLmdldE1pc3NlcygpO1xuICAgIGN1cnJCb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNib2FyZCR7cE9uZS5udW1iZXJ9YCk7XG4gIH1cblxuICB3aGlsZSAoY3VyckJvYXJkLmxhc3RFbGVtZW50Q2hpbGQpXG4gICAgY3VyckJvYXJkLnJlbW92ZUNoaWxkKGN1cnJCb2FyZC5sYXN0RWxlbWVudENoaWxkKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZC5sZW5ndGg7IGorKykge1xuICAgICAgY29uc3QgaXRlbSA9IGJvYXJkW2ldW2pdO1xuXG4gICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgaWYgKGlkID09PSBcInBsYXllci1PbmVcIikge1xuICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChgJHtwT25lLm51bWJlcn0tc3F1YXJlYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChgJHtwVHdvLm51bWJlcn0tc3F1YXJlYCk7XG4gICAgICB9XG5cbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiwgYCR7aX1gKTtcbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiwgYCR7an1gKTtcblxuICAgICAgaW5pdFNxckJ0bihwT25lLCBwVHdvLCBzcXVhcmUpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGl0ZW0gIT09IG51bGwgJiZcbiAgICAgICAgaXRlbS5nZXRTaGlwKCkuaGl0Q291bnQgPiAwICYmXG4gICAgICAgIGl0ZW0uZ2V0U2hpcCgpLmhpdENvb3IuZmluZCgoaXRlbSkgPT4ge1xuICAgICAgICAgIHJldHVybiBpdGVtWzBdID09PSBpICYmIGl0ZW1bMV0gPT09IGo7XG4gICAgICAgIH0pXG4gICAgICApIHtcbiAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogI0Q5MTY1NjtcIik7XG4gICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBtaXNzZXMuZmluZCgoaXRlbSkgPT4ge1xuICAgICAgICAgIHJldHVybiBpdGVtWzBdID09PSBpICYmIGl0ZW1bMV0gPT09IGo7XG4gICAgICAgIH0pXG4gICAgICApIHtcbiAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogIzE1QjM5MjtcIik7XG4gICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgIH1cblxuICAgICAgY3VyckJvYXJkLmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgfVxuICB9XG59O1xuXG5jb25zdCBpbml0U3FyQnRuID0gKHBPbmUsIHBUd28sIHNxdWFyZSkgPT4ge1xuICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRpYWxvZ1wiKTtcbiAgY29uc3QgeCA9IHBhcnNlSW50KHNxdWFyZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIikpO1xuICBjb25zdCB5ID0gcGFyc2VJbnQoc3F1YXJlLmdldEF0dHJpYnV0ZShcImRhdGEteVwiKSk7XG4gIGNvbnN0IHdpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2lubmVyXCIpO1xuICBjb25zdCBlbmRNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVuZC1nYW1lXCIpO1xuICBjb25zdCB3aW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYXktd2luZG93XCIpO1xuICBjb25zdCBwbGF5ZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItbmFtZVwiKTtcbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluXCIpO1xuXG4gIHNxdWFyZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3Qgc3F1YXJlSWQgPSBzcXVhcmUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgY29uc3QgaWQgPSB3aW5kb3cuZ2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiKTtcbiAgICBjb25zdCBtb2RlID0gbWFpbi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICBsZXQgYm9hcmQ7XG4gICAgbGV0IGJvYXJkTGlzdDtcblxuICAgIGlmIChzcXVhcmVJZCA9PT0gXCJPbmUtc3F1YXJlXCIpIHtcbiAgICAgIGJvYXJkID0gcE9uZS5ib2FyZDtcbiAgICB9IGVsc2Uge1xuICAgICAgYm9hcmQgPSBwVHdvLmJvYXJkO1xuICAgIH1cblxuICAgIGJvYXJkTGlzdCA9IGJvYXJkLmdldEJvYXJkKCk7XG5cbiAgICBib2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpO1xuICAgIGlmIChib2FyZExpc3RbeF1beV0gPT09IG51bGwpIHtcbiAgICAgIGlmIChzcXVhcmVJZCA9PT0gXCJPbmUtc3F1YXJlXCIpIHtcbiAgICAgICAgaGlkZUJvYXJkKHBUd28pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGlkZUJvYXJkKHBPbmUpO1xuICAgICAgfVxuXG4gICAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiAjRkNDRDJBO1wiKTtcblxuICAgICAgaWYgKG1vZGUgPT09IFwicHZjXCIpIHtcbiAgICAgICAgcGxheWVyTmFtZS50ZXh0Q29udGVudCA9IFwiQ29tcHV0ZXJgcyB0dXJuIVwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWQgPT09IFwicGxheWVyLU9uZVwiXG4gICAgICAgICAgPyAocGxheWVyTmFtZS50ZXh0Q29udGVudCA9IFwiUGxheWVyIFR3b2BzIHR1cm4hXCIpXG4gICAgICAgICAgOiAocGxheWVyTmFtZS50ZXh0Q29udGVudCA9IFwiUGxheWVyIE9uZWBzIHR1cm4hXCIpO1xuICAgICAgfVxuXG4gICAgICBkaWFsb2cuc2hvd01vZGFsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzcXVhcmVJZCA9PT0gXCJPbmUtc3F1YXJlXCIpIHtcbiAgICAgICAgdXBkYXRlU2hpcGxpc3QoYm9hcmRMaXN0W3hdW3ldLCBwT25lLm51bWJlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVTaGlwbGlzdChib2FyZExpc3RbeF1beV0sIHBUd28ubnVtYmVyKTtcbiAgICAgIH1cbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6ICNEOTE2NTY7XCIpO1xuXG4gICAgICBpZiAoYm9hcmQuaXNBbGxTdW5rKCkpIHtcbiAgICAgICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogI0Q5MTY1NjtcIik7XG4gICAgICAgIGVuZE1zZy5zaG93TW9kYWwoKTtcbiAgICAgICAgaWYgKGlkID09PSBcInBsYXllci1Ud29cIikge1xuICAgICAgICAgIHdpbm5lci50ZXh0Q29udGVudCA9IGBDb25ncmF0dWxhdGlvbnMgUGxheWVyIFR3byFgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbm5lci50ZXh0Q29udGVudCA9IGBDb25ncmF0dWxhdGlvbnMgUGxheWVyIE9uZSFgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IGNvbXBNb2RlID0gKHBsYXllcikgPT4ge1xuICBwbGF5ZXIuYm9hcmQucG9wdWxhdGVCZCgpO1xuICByZW5kZXJCb2FyZChwbGF5ZXIpO1xuICBoaWRlQm9hcmQocGxheWVyKTtcbn07XG5cbmNvbnN0IGF1dG9BdGsgPSAocGxheU9uZSwgcGxheVR3bykgPT4ge1xuICBjb25zdCBib2FyZCA9IHBsYXlPbmUuYm9hcmQ7XG4gIGNvbnN0IGJvYXJkTGlzdCA9IGJvYXJkLmdldEJvYXJkKCk7XG4gIGNvbnN0IG1pc3NlcyA9IGJvYXJkLmdldE1pc3NlcygpO1xuICBjb25zdCBoaXRzID0gYm9hcmQuZ2V0SGl0cygpO1xuICBjb25zdCBwbGF5V2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5LXdpbmRvd1wiKTtcbiAgY29uc3Qgd2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW5uZXJcIik7XG4gIGNvbnN0IGVuZE1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZW5kLWdhbWVcIik7XG4gIGxldCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICBsZXQgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgbGV0IGNvbnQgPSB0cnVlO1xuXG4gIHdoaWxlIChjb250ID09PSB0cnVlKSB7XG4gICAgaWYgKFxuICAgICAgbWlzc2VzLmZpbmQoKGl0ZW0pID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW1bMF0gPT09IHggJiYgaXRlbVsxXSA9PT0geTtcbiAgICAgIH0pIHx8XG4gICAgICBoaXRzLmZpbmQoKGl0ZW0pID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW1bMF0gPT09IHggJiYgaXRlbVsxXSA9PT0geTtcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGJvYXJkLnJlY2VpdmVBdHRhY2soeCwgeSk7XG5cbiAgICBpZiAoYm9hcmRMaXN0W3hdW3ldID09PSBudWxsKSB7XG4gICAgICBjb25zdCBpZCA9IGBwbGF5ZXItJHtwbGF5VHdvLm51bWJlcn1gO1xuICAgICAgcGxheVdpbmRvdy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIGBwbGF5ZXItJHtwbGF5T25lLm51bWJlcn1gKTtcbiAgICAgIHJlbmRlckJvYXJkKHBsYXlPbmUpO1xuICAgICAgcmVuZGVyUGxheUJkKHBsYXlPbmUsIHBsYXlUd28sIGlkKTtcbiAgICAgIGNvbnQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXBkYXRlU2hpcGxpc3QocGxheU9uZS5ib2FyZC5nZXRCb2FyZCgpW3hdW3ldLCBwbGF5T25lLm51bWJlcik7XG4gICAgICBpZiAocGxheU9uZS5ib2FyZC5pc0FsbFN1bmsoKSkge1xuICAgICAgICBjb250ID0gZmFsc2U7XG4gICAgICAgIGVuZE1zZy5zaG93TW9kYWwoKTtcbiAgICAgICAgd2lubmVyLnRleHRDb250ZW50ID0gXCJDb21wdXRlciB3b24hXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgICB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuY29uc3QgaW5pdFJhbmRCdG4gPSAocE9uZSwgcFR3bykgPT4ge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XG4gIGNvbnN0IHJhbmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3JhbmRvbVwiKTtcblxuICByYW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGlkID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcblxuICAgIGlmIChpZCA9PT0gXCJwbGF5ZXJPbmUtZm9ybVwiKSB7XG4gICAgICBwT25lLmJvYXJkLnBvcHVsYXRlQmQoKTtcbiAgICAgIHJlbmRlckJvYXJkKHBPbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwVHdvLmJvYXJkLnBvcHVsYXRlQmQoKTtcbiAgICAgIHJlbmRlckJvYXJkKHBUd28pO1xuICAgIH1cbiAgfSk7XG59O1xuXG5jb25zdCByZW5kZXJTaGFwZSA9IChwbGF5ZXIpID0+IHtcbiAgY29uc3Qgc2hpcHNPYmogPSBwbGF5ZXIuYm9hcmQuZ2V0U2hpcHMoKTtcbiAgY29uc3Qgc2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NoaXBzXCIpO1xuICBjb25zdCBuYW1lID0gc2VsZWN0ZWQudmFsdWU7XG4gIGNvbnN0IHNoaXAgPSBzaGlwc09ialtuYW1lXTtcbiAgY29uc3QgbGVuZ3RoID0gc2hpcC5nZXRTaGlwKCkubGVuZ3RoO1xuICBjb25zdCBzaGFwZUNvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNoYXBlXCIpO1xuXG4gIHdoaWxlIChzaGFwZUNvbnQubGFzdEVsZW1lbnRDaGlsZClcbiAgICBzaGFwZUNvbnQucmVtb3ZlQ2hpbGQoc2hhcGVDb250Lmxhc3RFbGVtZW50Q2hpbGQpO1xuXG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IGxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZVwiKTtcbiAgICBzaGFwZUNvbnQuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgfVxufTtcblxuY29uc3QgdXBkYXRlU2hpcGxpc3QgPSAoc2hpcCwgbnVtYmVyKSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBzaGlwLmdldFNoaXAoKS5uYW1lO1xuICBjb25zdCBzaGlwc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuc2hpcGxpc3QtJHtudW1iZXJ9YCk7XG4gIGNvbnN0IHNoaXBDb250ID0gc2hpcHNMaXN0LnF1ZXJ5U2VsZWN0b3IoYC4ke25hbWV9YCk7XG4gIGNvbnN0IHNxdWFyZXMgPSBzaGlwQ29udC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNxdWFyZVwiKTtcbiAgY29uc3QgdGVtcCA9IFtdO1xuXG4gIGlmIChzaGlwLmlzU3VuaygpKSB7XG4gICAgc3F1YXJlcy5mb3JFYWNoKChzcXVhcmUpID0+IHtcbiAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6ICNEOTE2NTY7XCIpO1xuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnQge1xuICByZW5kZXJCb2FyZCxcbiAgaW5pdFBsYWNlU2hpcCxcbiAgaW5pdEZpblNldHVwLFxuICBpbml0cGxheUJ0bixcbiAgY29tcE1vZGUsXG4gIGluaXRSYW5kQnRuLFxuICByZW5kZXJTaGFwZSxcbn07XG4iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcbmltcG9ydCB7XG4gIHJlbmRlckJvYXJkLFxuICBpbml0UGxhY2VTaGlwLFxuICBpbml0RmluU2V0dXAsXG4gIGluaXRwbGF5QnRuLFxuICBjb21wTW9kZSxcbiAgaW5pdFJhbmRCdG4sXG4gIHJlbmRlclNoYXBlLFxufSBmcm9tIFwiLi9ET01cIjtcblxuY29uc3QgZ2FtZU1vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbWVfbW9kZVwiKTtcbmNvbnN0IHB2cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHZwXCIpO1xuY29uc3QgcHZjQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwdmNcIik7XG5jb25zdCByZXN0YXJ0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5yZXN0YXJ0XCIpO1xuY29uc3QgZW5kTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbmQtZ2FtZVwiKTtcbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcbmNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2hpcHNcIik7XG5jb25zdCBzZWxlY3RPciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3JpZW50YXRpb25cIik7XG5sZXQgcGxheWVyT25lID0gUGxheWVyKFwiT25lXCIpO1xubGV0IHBsYXllclR3byA9IFBsYXllcihcIlR3b1wiKTtcblxuaW5pdFBsYWNlU2hpcChwbGF5ZXJPbmUsIHBsYXllclR3byk7XG5pbml0RmluU2V0dXAocGxheWVyT25lLCBwbGF5ZXJUd28pO1xuaW5pdHBsYXlCdG4ocGxheWVyT25lLCBwbGF5ZXJUd28pO1xuaW5pdFJhbmRCdG4ocGxheWVyT25lLCBwbGF5ZXJUd28pO1xucmVuZGVyQm9hcmQocGxheWVyT25lKTtcbnJlbmRlckJvYXJkKHBsYXllclR3byk7XG5yZW5kZXJTaGFwZShwbGF5ZXJPbmUpO1xuXG5wdnBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgcmV0dXJuIGdhbWVNb2RlLmNsb3NlKCk7XG59KTtcblxucHZjQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpblwiKTtcblxuICBjb21wTW9kZShwbGF5ZXJUd28pO1xuXG4gIG1haW4uY2xhc3NMaXN0LmFkZChcInB2Y1wiKTtcblxuICByZXR1cm4gZ2FtZU1vZGUuY2xvc2UoKTtcbn0pO1xuXG5yZXN0YXJ0QnRuLmZvckVhY2goKGJ1dHRvbikgPT5cbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIik7XG4gICAgY29uc3Qgd2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5LXdpbmRvd1wiKTtcbiAgICBjb25zdCB4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN4LWNvb3JcIik7XG4gICAgY29uc3QgeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjeS1jb29yXCIpO1xuICAgIGNvbnN0IG9wdCA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKFwiLmJhdHRsZXNoaXBcIik7XG4gICAgY29uc3Qgc3F1YXJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3F1YXJlXCIpO1xuICAgIGNvbnN0IHNoYXBlQ29udCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2hhcGVcIik7XG4gICAgY29uc3QgbWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZVwiKTtcbiAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInNwYW5cIik7XG5cbiAgICBlbmRNc2cuY2xvc2UoKTtcblxuICAgIGZvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwbGF5ZXJPbmUtZm9ybVwiKTtcbiAgICBmb3JtLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgIG1haW4uY2xhc3NMaXN0LnJlbW92ZShcInB2Y1wiKTtcbiAgICBzaGFwZUNvbnQuY2xhc3NMaXN0LnJlbW92ZShcInZlcnRpY2FsXCIpO1xuICAgIHdpbmRvdy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIFwicGxheWVyLVR3b1wiKTtcblxuICAgIHNxdWFyZXMuZm9yRWFjaCgoc3F1YXJlKSA9PiB7XG4gICAgICBzcXVhcmUucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgfSk7XG5cbiAgICB4LnZhbHVlID0gXCJcIjtcbiAgICB5LnZhbHVlID0gXCJcIjtcbiAgICBvcHQucmVtb3ZlQXR0cmlidXRlKFwic2VsZWN0ZWRcIik7XG4gICAgb3B0LnNldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIsIFwiXCIpO1xuXG4gICAgc3Bhbi50ZXh0Q29udGVudCA9IFwiUGxheWVyIE9uZVwiO1xuICAgIG1lc3NhZ2UucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG5cbiAgICByZW5kZXJTaGFwZShwbGF5ZXJPbmUpO1xuICAgIHBsYXllck9uZS5ib2FyZC5yZXNldEJvYXJkKCk7XG4gICAgcGxheWVyVHdvLmJvYXJkLnJlc2V0Qm9hcmQoKTtcblxuICAgIHJlbmRlckJvYXJkKHBsYXllck9uZSk7XG4gICAgcmVuZGVyQm9hcmQocGxheWVyVHdvKTtcbiAgICBnYW1lTW9kZS5zaG93TW9kYWwoKTtcbiAgfSlcbik7XG5cbnNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgcmVuZGVyU2hhcGUocGxheWVyT25lKTtcbn0pO1xuXG5zZWxlY3RPci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgY29uc3Qgc2hhcGVDb250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaGFwZVwiKTtcblxuICBpZiAoc2VsZWN0T3IudmFsdWUgPT09IFwidmVydGljYWxcIikge1xuICAgIHNoYXBlQ29udC5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG4gIH0gZWxzZSB7XG4gICAgc2hhcGVDb250LmNsYXNzTGlzdC5yZW1vdmUoXCJ2ZXJ0aWNhbFwiKTtcbiAgfVxufSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxvYWRcIiwgZ2FtZU1vZGUuc2hvd01vZGFsKCkpO1xuIl0sIm5hbWVzIjpbIlNoaXAiLCJuIiwibmFtZSIsInNoaXBPYmoiLCJnZXRTaGlwIiwiaGl0IiwiaGl0Q291bnQiLCJsZW5ndGgiLCJzdW5rIiwiaXNTdW5rIiwicmVzZXRTaGlwIiwib3JpZW50YXRpb24iLCJjb21wIiwiaGl0Q29vciIsIkdhbWVib2FyZCIsImJvYXJkIiwibWlzc2VzIiwiaGl0cyIsImFsbFNoaXBzIiwiYmF0dGxlc2hpcCIsImNydWlzZXJfSSIsImNydWlzZXJfSUkiLCJkZXN0cm95ZXJfSSIsImRlc3Ryb3llcl9JSSIsImRlc3Ryb3llcl9JSUkiLCJzdWJtYXJpbmVfSSIsInN1Ym1hcmluZV9JSSIsInN1Ym1hcmluZV9JSUkiLCJzdWJtYXJpbmVfSVYiLCJpc0ZpdCIsImFyciIsInN0YXR1cyIsImZvckVhY2giLCJpdGVtIiwieCIsInkiLCJjcmVhdGVDb21wIiwic2hpcCIsInRlbXAiLCJhIiwiYiIsInB1c2giLCJwbGFjZVNoaXAiLCJhbGVydCIsImNyZWF0ZUJvYXJkIiwiaSIsImoiLCJnZXRCb2FyZCIsImdldFNoaXBzIiwicmVjZWl2ZUF0dGFjayIsImdldE1pc3NlcyIsImdldEhpdHMiLCJpc0FsbFN1bmsiLCJzaGlwcyIsIk9iamVjdCIsInZhbHVlcyIsInBvcHVsYXRlQmQiLCJrZXlzIiwiZGlyZWN0aW9ucyIsImtleSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInoiLCJmaXQiLCJyZXNldEJvYXJkIiwiUGxheWVyIiwibnVtYmVyIiwid2luIiwiaXNDb21wIiwiZmlsbFNxciIsInBsYXllciIsInNxciIsInRhZyIsImZpbmQiLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJCb2FyZCIsInNoaXBzT2JqIiwieENvb3IiLCJ5Q29vciIsInJlbmRlclNoaXAiLCJwbGF5ZXJOdW0iLCJjdXJyZW50Qm9hcmQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibGFzdEVsZW1lbnRDaGlsZCIsInJlbW92ZUNoaWxkIiwic3F1YXJlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiaGlkZUJvYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbmRlclBsYXlCZCIsInBPbmUiLCJwVHdvIiwiaWQiLCJjdXJyQm9hcmQiLCJxdWVyeVNlbGVjdG9yIiwiaW5pdFNxckJ0biIsImRpYWxvZyIsInBhcnNlSW50IiwiZ2V0QXR0cmlidXRlIiwid2lubmVyIiwiZW5kTXNnIiwid2luZG93IiwicGxheWVyTmFtZSIsIm1haW4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic3F1YXJlSWQiLCJtb2RlIiwiYm9hcmRMaXN0IiwidGV4dENvbnRlbnQiLCJzaG93TW9kYWwiLCJ1cGRhdGVTaGlwbGlzdCIsInJlbmRlclNoYXBlIiwidmFsdWUiLCJzaGFwZUNvbnQiLCJzcXVhcmVzIiwiZ2FtZU1vZGUiLCJwdnBCdG4iLCJwdmNCdG4iLCJyZXN0YXJ0QnRuIiwic2VsZWN0T3IiLCJwbGF5ZXJPbmUiLCJwbGF5ZXJUd28iLCJzaGlwTmFtZSIsIm9yaWVudCIsIk51bWJlciIsImlzTmFOIiwiYnV0dG9uIiwiZm9ybSIsImlzQWxsUGxhY2VkIiwib3B0IiwibWVzc2FnZSIsInNwYW4iLCJyZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbml0RmluU2V0dXAiLCJQT25lIiwiUFR3byIsInBsYXlXaW5kb3ciLCJjbG9zZSIsInBsYXlPbmUiLCJwbGF5VHdvIiwiY29udCIsImF1dG9BdGsiLCJpbml0cGxheUJ0biIsImluaXRSYW5kQnRuIl0sInNvdXJjZVJvb3QiOiIifQ==